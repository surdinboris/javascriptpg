<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>
  //       function rowHeights(rows) {
  //           return rows.map(function(row) {
  //               return row.reduce(function(max, cell) {
  //                   return Math.max(max, cell.minHeight());
  //               }, 0);
  //           });
  //       }
  //       function colWidths(rows) {  //columns based on upper row, for each column i
  //           // (iterator) counting longer element in whole array based on minWidth method
  //           return rows[0].map(function(_, i) {
  //               return rows.reduce(function(max, row) {
  //                   return Math.max(max, row[i].minWidth());
  //               }, 0);
  //           });
  //       }
  //       //drawing execution
  //
  //       function drawTable(rows) {
  //           var heights = rowHeights(rows); //retrieving geometry
  //           var widths = colWidths(rows);
  //
  //           function drawLine(blocks, lineNo) {  //getting lines - blocks from separated sells (in case of multiline cells)
  //               return blocks.map(function(block) {
  //                   return block[lineNo];
  //               }).join(" ");
  //           }
  //
  //           function drawRow(row, rowNum) {
  //               //drawing row line by line  by blocks (line contain blocks separated by columns)
  //               var blocks = row.map(function(cell, colNum) {  //extracting blocks by iterating over rows and extracting cells with earlier calculated width and heights (for each cell pulling its own property via i (colNum iterator), rowNum is fixed for each call)
  //                   return cell.draw(widths[colNum], heights[rowNum]);
  //               });
  //               //console.log(blocks);
  //               return blocks[0].map(function(_, lineNo) {  // for each column block calling drawline function by its index and appending line break
  //                   return drawLine(blocks, lineNo);
  //               }).join("\n");
  //           }
  //
  //           return rows.map(drawRow).join("\n"); //calling whole function
  //       }
  //
  //       function repeat(string, times) {  //filler function
  //           var result = "";
  //           for (var i = 0; i < times; i++)
  //               result += string;
  //           return result;
  //       }
  //
  //       function TextCell(text) {
  //           this.text = text.split("\n"); //retrieving lines
  //
  //       }
  //       TextCell.prototype.minWidth = function() {
  //
  //           return this.text.reduce(function(width, line) { //iterates and returns max width
  //               // inside of array's members  (earlier splitted  row elemets by  (this.text array) line.length)
  //               return Math.max(width, line.length);
  //           }, 0);
  //       };
  //
  //       TextCell.prototype.minHeight = function() {
  //           return this.text.length; //count of splitted this.text rows - as cell's height
  //       };
  //
  //       TextCell.prototype.draw = function(width, height) {  //building block of text
  //           var result = [];
  //           for (var i = 0; i < height; i++) {
  //               var line = this.text[i] || ""; //in case of empty line - no text for this index
  //               result.push(line + repeat(" ", width - line.length)); //filling spaces after cell to align
  //           }
  //           return result;
  //       };
  //       //generating dataset
  //       var rows = [];
  //       for (var i = 0; i < 15; i++) {
  //           var row = [];
  //           for (var j = 0; j < 5; j++) {
  //               if ((j + i) % 2 == 0) {
  //                   //var rn= String(Math.random()*10).slice(0,1);
  //                   //if (rn % 2 == 0)
  //
  //                       row.push(new TextCell(j+"#"));
  //
  //                   }
  //               else
  //                   row.push(new TextCell(j+"++++++++++"));
  //           }
  //           rows.push(row);
  //       }
  //
  //       function UnderlinedCell(inner) {
  //           this.inner = inner;
  //       };
  //       UnderlinedCell.prototype.minWidth = function() { //function that calls minWidth method of passed this.cell
  //           console.log(this.inner.minWidth());
  //           return this.inner.minWidth();
  //
  //
  //       };
  //       UnderlinedCell.prototype.minHeight = function() { //function that calls minHeight method of passed this.cell and appends one line for underlines
  //           return this.inner.minHeight() + 1;
  //       };
  //       UnderlinedCell.prototype.draw = function(width, height) {
  //            //using TextCell's method
  //           return this.inner.draw(width, height - 1)
  //               .concat([repeat("-", width)]);
  //       };
  //
  //
  //       function dataTable(data) {
  //           var keys = Object.keys(data[0]); //retrieving upper row as headers
  //           var headers = keys.map(function(name) {
  //               return new UnderlinedCell(new TextCell(name));
  //           });
  //           var body = data.map(function(row) {
  //               return keys.map(function(name) {
  //                   return new TextCell(String(row[name]));
  //
  //               });
  //           });
  //           return [headers].concat(body);
  //       }
  //
  //       var MOUNTAINS = [
  //           {name: "Kilimanjaro", height: 5895, country: "Tanzania"},
  //           {name: "Everest", height: 8848, country: "Nepal"},
  //           {name: "Mount Fuji", height: 3776, country: "Japan"},
  //           {name: "Mont Blanc", height: 4808, country: "Italy/France"},
  //           {name: "Vaalserberg", height: 323, country: "Netherlands"},
  //           {name: "Denali", height: 6168, country: "United States"},
  //           {name: "Popocatepetl", height: 5465, country: "Mexico"}
  //       ];
  //
  //       if (typeof module != "undefined" && module.exports)
  //           module.exports = MOUNTAINS;
  //
  //       //console.log(new TextCell('yum1'));
  //
  //       //sample manual dataset
  //       var rf=[[new TextCell('zum0'),new TextCell('zum0'),new TextCell('yum1')],[new TextCell('fgjgj \ndfgdf \nsdgsdg \n'),new TextCell('yum1')],[new TextCell('yum0'),new TextCell('yum0')],[new TextCell('yum0'),new TextCell('yum1')],
  //           [new TextCell('bum0'),new TextCell('yum1'),new TextCell('yum1')],[new TextCell('bum0'),new TextCell('yum1')],[new TextCell('bum0'),new TextCell('yum1')],
  //           [new TextCell('zum0'),new TextCell('yum1')],[new TextCell('zum0'),new TextCell('yum1')],[new TextCell('zum0'),new TextCell('yum1')]];
  //
  //       //console.log(drawTable(dataTable(rf)));
  //
  //       function RtCell(text) {
  //           TextCell.call(this,'34534\nrferf');
  //       }
  //
  // var ff = new RtCell('34534\nrferf');
  //       console.log(ff);


        // rows.forEach(function (value) {
        //     console.log(value[0]) });
        //console.log('------------------');
        //console.log(rf[0]);
        //console.log('------------------');
        // console.log(
        // rf[0].map(function (_,iter) {
        //     return rf.reduce(function (mx,row) {
        //         return Math.max(mx,row[iter].minWidth());
        //
        //     },0);
        // }));

        //console.log(drawTable(rows));

        //sample one element testing
        // var tst=new TextCell('yum0 \ndfgdf \nsdgsdg \n');
        //
        // console.log(tst.text);
        // console.log(tst.minHeight());
        //console.log(tst.minWidth());
        //console.log(tst.minHeight());



        // //====================constructor============================
        // //
        // //create prototype  via function (constructor)
        // function SuperRabbi() { this.addr = 'Litovsy blvd, 11,5'
        // }
        // var superInstanceRabbi= new SuperRabbi();
        // superInstanceRabbi.getaddr=function() {return this.addr
        // };
        // console.log(superInstanceRabbi.getaddr());
        // console.log(Object.getPrototypeOf(superInstanceRabbi));

        //=======================constructor example=====================
        //
       //  var InhConstr = function (u) {
       //      this.w = u;
       //      this.v = 7;
       //  //     this.getW=function () {
       //  //         return this.w
       //  //    }
       // };
       //
       //  // if defining after prototype function declaration, instead of this inside, we use ptototype outside when changing already created prototype
       //  InhConstr.prototype.getW=function () {
       //      return this.w
       //  };
       //  var Inh1= new InhConstr(99);
       //  console.log(Inh1.getW());
       //
       //  var Inh2 = new InhConstr(109);
       //  console.log(Inh2.getW());
       //

        //============================obj factory========================

  //   var ObFact= function (par1,par2) {
      //
      //       var retobj={};
      //       retobj.func1=function () {
      //           console.log(par1, "func1 reurnet par1");
      //       };
      //       retobj.func2=function () {
      //               console.log(par2,"func2 reurnet par2")
      //       };
      //       return retobj
      //   };
      // var newObjfel=ObFact('gupa1','zupa2');
      // newObjfel.func1();
      // newObjfel.func2();

        // //============================================================
        //
        // function Increase(base) {
        //     this.base = base;
        //     this.mult=0;
        // }
        //
        // var simpleIncrease = new Increase();
        //
        //
        // simpleIncrease.base=function () {return 'empty function init. multiplier ='+ this.mult
        //
        // };
        //
        // console.log(simpleIncrease.base());
        //
        //
        //
        // var newIncrease = new Increase(function (arg) { //passing base function
        //     return arg*5*this.mult
        //
        // });
        //
        // newIncrease.mult=7;
        // console.log(newIncrease.base(9)); //calling base function with arg
        // //console.log(newIncrease.base);
        //
        // var oldIncrease = new Increase(function (arg) { //passing base function
        //     return arg*5*this.mult
        // });
        //
        // oldIncrease.mult=800;
        // console.log(oldIncrease.base(900));
        //
        // Increase.prototype.dance = function () { console.log('dance')
        //
        // };
        // oldIncrease.dance();

        //========================object.create vs new Object==================

  // var Call = {numbr: '1234', from: 'outside'};
  //
  // var mycall = {};
  // console.log(mycall.__proto__);
  // Object.setPrototypeOf(mycall, Call);
  //
  // console.log(mycall.numbr);
  // console.log(Call.isPrototypeOf(mycall));
  // console.log(Call.isPrototypeOf(mycall));
  // function Fcall() {
  //
  // };
  // Fcall.prototype.numbr='1234';
  // Fcall.prototype.from = 'outside';
  // var fcall= new Fcall();
  // console.log(fcall.numbr);



//   var vObj={
//       prop1: 'this is Object',
//       func: function (action) {
//           this.action=action;
//           console.log(action);
//           console.log(this.action);
//           console.log('fn1 of Vfunc initialized in ', this)
//       }
//   };
//
//
//
//   var tobj = Object.create(vObj);
//   tobj.func('do'); //this and prototype doesn't work i.e. tobj  inherits directly from prototype
//   vObj.func2= function (action) {
//       console.log(action)  };
//   tobj.func2('do2');
//
//   //trying with function constructor
//
//   function Vfunc1 (tr,lr) {
//       this.tr = tr;
//       this.fn1 = function () {
//           console.log(lr, this.tr)
//       };
//       //some nice counter based on local constructor variable
//
//       var counter=0;
//       this.count = function () {
//           counter++;
//       };
//       this.getcountr = function () {
//           console.log(counter)
//       };
//   };
//
//   function Vfunc2(tr2) {
//       this.trr2 = tr2;
//   };
//
//   Vfunc2.prototype.fn2= function (tr2) {
//        console.log('fn2 of Vfunc2 initialized in ', this.trr2, tr2)
//    };
//   Vfunc2.prototype.counterinit= function (){
//       this.counter =0;
//   };
//
//
//   Vfunc2.prototype.count = function () {
//        //some nice counter based on local constructor variable
//            this.counter++;
//        };
//
//   Vfunc2.prototype.getcountr = function () {
//            console.log('vf2 counter equals',this.counter)
//        };
//
//
//
//    var vf2= new Vfunc2('assigned during instance creation');
//    //vf2.fn2('assigned during function call');
//   vf2.counterinit();
//   vf2.count();
//   vf2.count();
//   vf2.count();
//   vf2.getcountr();
//
//   var vf3= new Vfunc2('assigned during instance creation');
//   //vf2.fn2('assigned during function call');
//   vf3.counterinit();
//   vf3.count();
//   vf3.count();
//   vf3.count();
//   vf3.getcountr();
//
//
// //example shows that in case of constructor-based functions
// // for each  created object counter works separately
//
//   var vf1= new Vfunc1('halabuda1', 'halabuda2');
//   vf1.fn1();
//   vf1.count();
//   vf1.count();
//   vf1.count();
//   vf1.getcountr();
//
//   var vf11= new Vfunc1('halabuda11', 'halabuda12');
//   vf11.fn1();
//   vf11.count();
//   vf11.count();
//   vf11.count();
//   vf11.getcountr();
//
//
//   console.log('small set of functions due to prototype declaration usage',vf11);
//   console.log('whole set of functions due to contructor vars usage',vf2);




  //=====================prototypes=============================
      //   var map ={};
      //   console.log(map);
      //   function storeMap(key,val) {
      //       map[key] =val;
      //               }
      //   storeMap(1,'kuku');
      //   storeMap(2,'uuku');
      //   storeMap('hasOwnProperty','ruku');
      //   storeMap(7,'nuku');
      //
      //   //Object.prototype.nonsense = '345';
      //   var vf=[1,2,3,4];
      //   Object.defineProperty(Array.prototype,'nuanua',{value:'nua346', enumerable : false});
      //
      //   Object.defineProperty(Object.prototype,'nonsense',{value:function () {console.log( 'something')
      //
      //       }, enumerable : false});
      //
      //   // for (var n in map)
      //   //     console.log(n)
      //   // console.log('valueOf' in map);
      //   //
      //   console.log(map.hasOwnProperty(7));
      //   // console.log(map.toString)
      //   for (var t in vf)
      //       console.log(t*8)
      //  // var empty = {};
      //  //  console.log(empty.toString);
      //  //  // . function toString(){...}
      //  //  console.log(empty.toString());
      //  //  // . [object Object]
      //
      //  //creating prototype via object
      //  var  protoRabbi = {
      //        sleep: function (line) {
      //          //console.log(this.types!=undefined? this.types : 'fallback ');
      //
      //          var  th=this.typesp||'fallback ';
      //          console.log( "The " +this.type + ' rabbi say ' +  line+' '+ th );
      //      },
      //      speak: function (line) {
      //          //console.log(this.types!=undefined? this.types : 'fallback ');
      //
      //          var  th=this.typesp||'fallback ';
      //          console.log( "The " +this.type + ' rabbi say ' +  line+' '+ th );
      //      }
      //
      //  };
      //  var megaRabbi = Object.create((protoRabbi)); //object  way to create via Object
      //
      //  protoRabbi.type = 'haredi';
      //  protoRabbi.kind='Journey to the past';
      //  protoRabbi.dream=function (arg) { return "Rabbi dreams about "+ this.kind +' '+ (arg || '')
      //
      //  };
      // console.log(protoRabbi.dream('in time machine'));
      //
      //  megaRabbi.typesp = 'buchari';
      //  protoRabbi.speak('everybody speak');
      //
      //   megaRabbi.speak('everybody speak');
      //   megaRabbi.type = 'sabre';
      //   megaRabbi.sleep('everybody sleep');
      //
      //
      //   console.log(Object.getPrototypeOf(megaRabbi));
      //
      //   var fresh= Object.create(null);
      //   fresh.arr=[1,3,4,5,9];
      //   fresh.exec=function () {this.arr.forEach( function (a) {console.log(a)
      //   })
      //   };
      //   console.log(fresh.exec());
      //   console.log('toString' in fresh);

       //  //=====================properties=============================
       //  function speak(line) {
       //      console.log('The ' +this.type+ 'rabbit says ' +line);
       //  }
       //  function scream(line) {
       //      console.log('The ' +this.type+ ' rabbit screams ' +line);
       //  }
       //  var whiteRabbit = {type: "white", speak: speak};
       //  var hungryRabbit = {type: "hungry", speak:speak, scream:scream};
       //  var oldRabbit={type: "old", scream:scream};
       //
       //  whiteRabbit.speak('The');
       //  hungryRabbit.speak('Follw me');
       //  oldRabbit.scream('Walla!');
       //  hungryRabbit.scream('Walla!');
       //  speak.apply(whiteRabbit, ['tttttrrrrr']);
       //  speak.call({type:'oiled'},'Hi, oil');


  //====================================this=============================
//   var phone =  { action: 'bzzzzzz',
//     calling: function () {
//     console.log(this.action || this.action2 || 'no actions defined' )
//     }
//     };
//
//   //poppins calling
//
//   var poppinsphone= phone.calling;
//   poppinsphone.action='Poppins calling';
//
//   var pp=phone.calling.bind(poppinsphone);
//   pp();
// //poppins2 calling
//   var poppinsphone2= phone.calling;
//   poppinsphone2.action='Poppins2 calling';
//
//   var pp2=phone.calling.bind(poppinsphone2);
//   pp2();
//
//   //this lives in bounded functions poppinsphone and poppinsphone2, in case of attribute clashing
//   //they will be shadowed in declaration order, but via implemented earlier bounded function only action
//   //attribute will be invoked (action2 will seat as  this. property)
//
//   console.dir(pp2);
  //[[BoundThis]]
  // :
  // Æ’ ()
  // action
  //     :
  //     "Poppins calling"
  // action2
  //     :
  //     "Poppins2 calling"
  //
  // var defcall= phone.calling.bind(phone);
  // defcall();
  // //bzzzzz
  // //trying to overwrite .action property
  //
  // defcall();
  // //bzzzz - its binded to this of phone  and overwriting of this property does not successful
  //
  // defcall= pp2.bind(phone);
  // defcall();
  // //rebounded function printed Poppins2 calling
  //
  // //simple this example with method pulling from other function
  // defcall.calling=phone.calling.bind(phone);
  // defcall.action = 'zzzzzz';
  // defcall.calling();
  // console.log(this);
  //
  // var name = {Gooobye:[1,2,3]};
  // ['Hello', 'Goodbye'].forEach(function (value) {
  //     console.log(value +''+name+'<br />') });
  //
  // let aff=[4,5,7,2,3];
  // let rt=aff.map(function (value) { return(value+56) });
  // rt.map(function (_, i) { console.log(rt[i],'summ')});
  //
  // const players=[{name:'zelda', score:500},{name:'vik', score:3400},{name:'robin', score:40}];
  // let names=players.map(function (value) { return [value.name,value.score]});
  // console.log(names);
  // let aeronames = players.map(vanue => [vanue.name, vanue.score]);
  // console.log(aeronames);
  // let strr=['abcdefg'];
  // let tty = strr.map(function (value) { return value.toUpperCase() });
  // console.log(tty.join(''))
  //

       // //====================apply=========================
       //  function cons(f) {
       //      return function(){
       //          return f.apply(null, arguments)
       //              }}
       //
       // function consreg(f) {
       //     return function(arguments){
       //         return f(arguments)
       //     }}
       //  var itms=[56,345,343,67];
       //
       //  cons(console.log)(itms,itms,itms);
       //  consreg(console.log)(itms,itms,itms);
       //
       //  function prn(arr){
       //      return console.log.apply(null,arr)
       //  }
       //  prn([itms,itms,itms])

     //===========================bind====================-->
     //    var ANCESTRY_FILE = JSON.stringify([
     //        {"name": "Carolus Haverbeke", "sex": "m", "born": 1832, "died": 1905, "father": "Carel Haverbeke", "mother": "Maria van Brussel"},
     //        {"name": "Emma de Milliano", "sex": "f", "born": 1876, "died": 1956, "father": "Petrus de Milliano", "mother": "Sophia van Damme"},
     //        {"name": "Maria de Rycke", "sex": "f", "born": 1683, "died": 1724, "father": "Frederik de Rycke", "mother": "Laurentia van Vlaenderen"},
     //        {"name": "Jan van Brussel", "sex": "m", "born": 1714, "died": 1748, "father": "Jacobus van Brussel", "mother": "Joanna van Rooten"},
     //        {"name": "Philibert Haverbeke", "sex": "m", "born": 1907, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},
     //        {"name": "Jan Frans van Brussel", "sex": "m", "born": 1761, "died": 1833, "father": "Jacobus Bernardus van Brussel", "mother":null},
     //        {"name": "Pauwels van Haverbeke", "sex": "m", "born": 1535, "died": 1582, "father": "N. van Haverbeke", "mother":null},
     //        {"name": "Clara Aernoudts", "sex": "f", "born": 1918, "died": 2012, "father": "Henry Aernoudts", "mother": "Sidonie Coene"},
     //        {"name": "Emile Haverbeke", "sex": "m", "born": 1877, "died": 1968, "father": "Carolus Haverbeke", "mother": "Maria Sturm"},
     //        {"name": "Lieven de Causmaecker", "sex": "m", "born": 1696, "died": 1724, "father": "Carel de Causmaecker", "mother": "Joanna Claes"},
     //        {"name": "Pieter Haverbeke", "sex": "m", "born": 1602, "died": 1642, "father": "Lieven van Haverbeke", "mother":null},
     //        {"name": "Livina Haverbeke", "sex": "f", "born": 1692, "died": 1743, "father": "Daniel Haverbeke", "mother": "Joanna de Pape"},
     //        {"name": "Pieter Bernard Haverbeke", "sex": "m", "born": 1695, "died": 1762, "father": "Willem Haverbeke", "mother": "Petronella Wauters"},
     //        {"name": "Lieven van Haverbeke", "sex": "m", "born": 1570, "died": 1636, "father": "Pauwels van Haverbeke", "mother": "Lievijne Jans"},
     //        {"name": "Joanna de Causmaecker", "sex": "f", "born": 1762, "died": 1807, "father": "Bernardus de Causmaecker", "mother":null},
     //        {"name": "Willem Haverbeke", "sex": "m", "born": 1668, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},
     //        {"name": "Pieter Antone Haverbeke", "sex": "m", "born": 1753, "died": 1798, "father": "Jan Francies Haverbeke", "mother": "Petronella de Decker"},
     //        {"name": "Maria van Brussel", "sex": "f", "born": 1801, "died": 1834, "father": "Jan Frans van Brussel", "mother": "Joanna de Causmaecker"},
     //        {"name": "Angela Haverbeke", "sex": "f", "born": 1728, "died": 1734, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},
     //        {"name": "Elisabeth Haverbeke", "sex": "f", "born": 1711, "died": 1754, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},
     //        {"name": "Lievijne Jans", "sex": "f", "born": 1542, "died": 1582, "father":null, "mother":null},
     //        {"name": "Bernardus de Causmaecker", "sex": "m", "born": 1721, "died": 1789, "father": "Lieven de Causmaecker", "mother": "Livina Haverbeke"},
     //        {"name": "Jacoba Lammens", "sex": "f", "born": 1699, "died": 1740, "father": "Lieven Lammens", "mother": "Livina de Vrieze"},
     //        {"name": "Pieter de Decker", "sex": "m", "born": 1705, "died": 1780, "father": "Joos de Decker", "mother": "Petronella van de Steene"},
     //        {"name": "Joanna de Pape", "sex": "f", "born": 1654, "died": 1723, "father": "Vincent de Pape", "mother": "Petronella Wauters"},
     //        {"name": "Daniel Haverbeke", "sex": "m", "born": 1652, "died": 1723, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},
     //        {"name": "Lieven Haverbeke", "sex": "m", "born": 1631, "died": 1676, "father": "Pieter Haverbeke", "mother": "Anna van Hecke"},
     //        {"name": "Martina de Pape", "sex": "f", "born": 1666, "died": 1727, "father": "Vincent de Pape", "mother": "Petronella Wauters"},
     //        {"name": "Jan Francies Haverbeke", "sex": "m", "born": 1725, "died": 1779, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},
     //        {"name": "Maria Haverbeke", "sex": "m", "born": 1905, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},
     //        {"name": "Petronella de Decker", "sex": "f", "born": 1731, "died": 1781, "father": "Pieter de Decker", "mother": "Livina Haverbeke"},
     //        {"name": "Livina Sierens", "sex": "f", "born": 1761, "died": 1826, "father": "Jan Sierens", "mother": "Maria van Waes"},
     //        {"name": "Laurentia Haverbeke", "sex": "f", "born": 1710, "died": 1786, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},
     //        {"name": "Carel Haverbeke", "sex": "m", "born": 1796, "died": 1837, "father": "Pieter Antone Haverbeke", "mother": "Livina Sierens"},
     //        {"name": "Elisabeth Hercke", "sex": "f", "born": 1632, "died": 1674, "father": "Willem Hercke", "mother": "Margriet de Brabander"},
     //        {"name": "Jan Haverbeke", "sex": "m", "born": 1671, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},
     //        {"name": "Anna van Hecke", "sex": "f", "born": 1607, "died": 1670, "father": "Paschasius van Hecke", "mother": "Martijntken Beelaert"},
     //        {"name": "Maria Sturm", "sex": "f", "born": 1835, "died": 1917, "father": "Charles Sturm", "mother": "Seraphina Spelier"},
     //        {"name": "Jacobus Bernardus van Brussel", "sex": "m", "born": 1736, "died": 1809, "father": "Jan van Brussel", "mother": "Elisabeth Haverbeke"}
     //    ]);
     //
     //    var ancestry = JSON.parse(ANCESTRY_FILE);
     //    console.log(ancestry);
     //    var theSet = ["Carel Haverbeke", "Maria van Brussel",
     //        "Donald Duck"];
     //
     //
     //    function isInSet(set, person) {
     //
     //        return set.indexOf(person.name) > -1;
     //    }
     //    // var sp=ancestry[38];
     //    //
     //    // console.log(isInSet(ancestry, sp));
     //   // for each person unpack person, feed it into isInSet function with the small set comparsion - result goes to list per filter function
     //    console.log(ancestry.filter(function(person) {
     //
     //        //console.log(person);
     //       return isInSet(theSet, person);
     //   }));
     //    console.log(ancestry.filter(isInSet.bind(null, theSet)));
     //
     //
     //    // . [{name: "Maria van Brussel", ...},
     //    // {name: "Carel Haverbeke", ...}]
     //
     //
     //

  //============================closure==============================================
  // var add = (function () {
  //     var counter = 0;
  //     console.log(counter, 'counter setted once');
  //     return function () {
  //         console.log(counter);
  //         return counter += 1;}
  // })();
  //
  // console.log(add());
  // console.log(add());
  // console.log(add);
  //function stored in variable freezes executed onece and returned an initialized counter function
  // that
  // var somekind= function () {
  //     var counter = 0;
  //     console.log(counter, 'counter setted once');
  //     return function () {
  //         console.log(counter);
  //         return counter += 1;}
  // });
  //
  // somekind();
  // somekind();
  // somekind();

//========================basic object creations=====================================
  //action dictor produce some talks
  //
  //
  // function speach() {
  //     console.log(this.talk);
  // }
  //
  // function agitation() {
  //     console.log(this.agitation)
  //
  // }
  // //prototype of what dictor do
  // var Dictor = {
  //     dictorDo: speach
  // };
  //
  // var Polititian = {
  //     polititianDo: agitation
  //
  // };
  // Object.setPrototypeOf(Dictor,Polititian);
  //
  //
  // //create new dictor
  // var dorenko = Object.create(Dictor);
  //
  //
  //
  // dorenko.talk='Der grosser cake';
  // dorenko.agitation='Conservator';
  //
  // Object.setPrototypeOf(dorenko,Dictor);
  //
  // dorenko.dictorDo();
  // dorenko.polititianDo();
  //
  //
  // //without creation of object
  //
  // Dictor.talk = 'news';
  // Dictor.dictorDo();
  //

    </script>
<!--//=====================higher-order functions=================-->

<!--//         var ANCESTRY_FILE = JSON.stringify([-->
<!--//             {"name": "Carolus Haverbeke", "sex": "m", "born": 1832, "died": 1905, "father": "Carel Haverbeke", "mother": "Maria van Brussel"},-->
<!--//             {"name": "Emma de Milliano", "sex": "f", "born": 1876, "died": 1956, "father": "Petrus de Milliano", "mother": "Sophia van Damme"},-->
<!--//             {"name": "Maria de Rycke", "sex": "f", "born": 1683, "died": 1724, "father": "Frederik de Rycke", "mother": "Laurentia van Vlaenderen"},-->
<!--//             {"name": "Jan van Brussel", "sex": "m", "born": 1714, "died": 1748, "father": "Jacobus van Brussel", "mother": "Joanna van Rooten"},-->
<!--//             {"name": "Philibert Haverbeke", "sex": "m", "born": 1907, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
<!--//             {"name": "Jan Frans van Brussel", "sex": "m", "born": 1761, "died": 1833, "father": "Jacobus Bernardus van Brussel", "mother":null},-->
<!--//             {"name": "Pauwels van Haverbeke", "sex": "m", "born": 1535, "died": 1582, "father": "N. van Haverbeke", "mother":null},-->
<!--//             {"name": "Clara Aernoudts", "sex": "f", "born": 1918, "died": 2012, "father": "Henry Aernoudts", "mother": "Sidonie Coene"},-->
<!--//             {"name": "Emile Haverbeke", "sex": "m", "born": 1877, "died": 1968, "father": "Carolus Haverbeke", "mother": "Maria Sturm"},-->
<!--//             {"name": "Lieven de Causmaecker", "sex": "m", "born": 1696, "died": 1724, "father": "Carel de Causmaecker", "mother": "Joanna Claes"},-->
<!--//             {"name": "Pieter Haverbeke", "sex": "m", "born": 1602, "died": 1642, "father": "Lieven van Haverbeke", "mother":null},-->
<!--//             {"name": "Livina Haverbeke", "sex": "f", "born": 1692, "died": 1743, "father": "Daniel Haverbeke", "mother": "Joanna de Pape"},-->
<!--//             {"name": "Pieter Bernard Haverbeke", "sex": "m", "born": 1695, "died": 1762, "father": "Willem Haverbeke", "mother": "Petronella Wauters"},-->
<!--//             {"name": "Lieven van Haverbeke", "sex": "m", "born": 1570, "died": 1636, "father": "Pauwels van Haverbeke", "mother": "Lievijne Jans"},-->
<!--//             {"name": "Joanna de Causmaecker", "sex": "f", "born": 1762, "died": 1807, "father": "Bernardus de Causmaecker", "mother":null},-->
<!--//             {"name": "Willem Haverbeke", "sex": "m", "born": 1668, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
<!--//             {"name": "Pieter Antone Haverbeke", "sex": "m", "born": 1753, "died": 1798, "father": "Jan Francies Haverbeke", "mother": "Petronella de Decker"},-->
<!--//             {"name": "Maria van Brussel", "sex": "f", "born": 1801, "died": 1834, "father": "Jan Frans van Brussel", "mother": "Joanna de Causmaecker"},-->
<!--//             {"name": "Angela Haverbeke", "sex": "f", "born": 1728, "died": 1734, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
<!--//             {"name": "Elisabeth Haverbeke", "sex": "f", "born": 1711, "died": 1754, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
<!--//             {"name": "Lievijne Jans", "sex": "f", "born": 1542, "died": 1582, "father":null, "mother":null},-->
<!--//             {"name": "Bernardus de Causmaecker", "sex": "m", "born": 1721, "died": 1789, "father": "Lieven de Causmaecker", "mother": "Livina Haverbeke"},-->
<!--//             {"name": "Jacoba Lammens", "sex": "f", "born": 1699, "died": 1740, "father": "Lieven Lammens", "mother": "Livina de Vrieze"},-->
<!--//             {"name": "Pieter de Decker", "sex": "m", "born": 1705, "died": 1780, "father": "Joos de Decker", "mother": "Petronella van de Steene"},-->
<!--//             {"name": "Joanna de Pape", "sex": "f", "born": 1654, "died": 1723, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
<!--//             {"name": "Daniel Haverbeke", "sex": "m", "born": 1652, "died": 1723, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
<!--//             {"name": "Lieven Haverbeke", "sex": "m", "born": 1631, "died": 1676, "father": "Pieter Haverbeke", "mother": "Anna van Hecke"},-->
<!--//             {"name": "Martina de Pape", "sex": "f", "born": 1666, "died": 1727, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
<!--//             {"name": "Jan Francies Haverbeke", "sex": "m", "born": 1725, "died": 1779, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
<!--//             {"name": "Maria Haverbeke", "sex": "m", "born": 1905, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
<!--//             {"name": "Petronella de Decker", "sex": "f", "born": 1731, "died": 1781, "father": "Pieter de Decker", "mother": "Livina Haverbeke"},-->
<!--//             {"name": "Livina Sierens", "sex": "f", "born": 1761, "died": 1826, "father": "Jan Sierens", "mother": "Maria van Waes"},-->
<!--//             {"name": "Laurentia Haverbeke", "sex": "f", "born": 1710, "died": 1786, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
<!--//             {"name": "Carel Haverbeke", "sex": "m", "born": 1796, "died": 1837, "father": "Pieter Antone Haverbeke", "mother": "Livina Sierens"},-->
<!--//             {"name": "Elisabeth Hercke", "sex": "f", "born": 1632, "died": 1674, "father": "Willem Hercke", "mother": "Margriet de Brabander"},-->
<!--//             {"name": "Jan Haverbeke", "sex": "m", "born": 1671, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
<!--//             {"name": "Anna van Hecke", "sex": "f", "born": 1607, "died": 1670, "father": "Paschasius van Hecke", "mother": "Martijntken Beelaert"},-->
<!--//             {"name": "Maria Sturm", "sex": "f", "born": 1835, "died": 1917, "father": "Charles Sturm", "mother": "Seraphina Spelier"},-->
<!--//             {"name": "Jacobus Bernardus van Brussel", "sex": "m", "born": 1736, "died": 1809, "father": "Jan van Brussel", "mother": "Elisabeth Haverbeke"}-->
<!--//         ]);-->
<!--//-->
<!--//           var ancestry = JSON.parse(ANCESTRY_FILE);-->
<!--//-->
<!--//         var byName = {};-->
<!--//        ancestry.forEach(function(person) {-->
<!--//             byName[person.name] = person;-->
<!--//             });-->
<!--//        var popul=[];-->
<!--//         ancestry.forEach(function (person) {-->
<!--//             if (popul[Math.ceil(person.died / 100)] == undefined)-->
<!--//                 popul[Math.ceil(person.died / 100)] =[];-->
<!--//             popul[Math.ceil(person.died / 100)].push(person.died - person.born)-->
<!--//         });-->
<!--//         console.log(popul);-->
<!--//-->
<!--//         //console output-->
<!--//      var neww=[];-->
<!--//      console.log(popul.map(function (person) {-->
<!--//             return (average(person))}));-->
<!--//     //collecting to dedicated variable-->
<!--//      for(var k in popul)-->
<!--//          neww[k]=average(popul[k]);-->
<!--//         console.log('neww',neww);-->
<!--//-->
<!--//      popul.map(function (person) {-->
<!--//             return (average(person))});-->
<!--//-->
<!--//      function average (array) {-->
<!--//             function plus(a, b) {-->
<!--//                 return a + b-->
<!--//             }-->
<!--//             return array.reduce(plus) / array.length; //summarising and accumulating in current var of reduce-->
<!--//         }-->
<!--// // Grouping objects by type-->
<!--//-->
<!--//         var needGroup=['tr',1,3,'rtrtrw',{'vova':'f'},function some () {-->
<!--//-->
<!--//         }];-->
<!--//         var elemGroups ={};-->
<!--//         function groupBy(arr, func) {-->
<!--//          var groups=[];-->
<!--//          for (var i =0; i<arr.length; i++)-->
<!--//                  groups.push(func(arr[i]));-->
<!--//             return groups-->
<!--//         }-->
<!--//-->
<!--//         function detectType (a) {-->
<!--//             var aType= typeof a;-->
<!--//             function appendToType(elem) {-->
<!--//                 if(elemGroups[elem.objtype]== undefined){-->
<!--//                     elemGroups[elem.objtype]={};-->
<!--//                     elemGroups[elem.objtype]=[elem.elemVal]-->
<!--//                 }-->
<!--//                 else-->
<!--//                     elemGroups[elem.objtype].push(elem.elemVal)-->
<!--//             }-->
<!--//             switch (aType){-->
<!--//                 case "object":-->
<!--//                     appendToType({'objtype':'object','elemVal':a});-->
<!--//                     break;-->
<!--//                 case "string":-->
<!--//                     appendToType({'objtype':'string','elemVal':a});-->
<!--//                     break;-->
<!--//                 case 'number':-->
<!--//                     appendToType({'objtype':'number','elemVal':a});-->
<!--//                     break;-->
<!--//                 default:-->
<!--//                     appendToType({'objtype':'unreconzed','elemVal':a});-->
<!--//                     break;-->
<!--//                                 }-->
<!--//                     }-->
<!--//         function detectTypeFree (a) {-->
<!--//             var aType= typeof a;-->
<!--//             function appendToType(elem) {-->
<!--//                 if(elemGroups[elem.objtype]== undefined){-->
<!--//                     elemGroups[elem.objtype]={};-->
<!--//                     elemGroups[elem.objtype]=[elem.elemVal]-->
<!--//                 }-->
<!--//                 else-->
<!--//                     elemGroups[elem.objtype].push(elem.elemVal)-->
<!--//             }-->
<!--//               appendToType({'objtype':aType,'elemVal':a});-->
<!--//-->
<!--//         }-->
<!--//-->
<!--//         // groupBy(needGroup,detectType);-->
<!--//         // console.log(elemGroups);-->
<!--//-->
<!--//         groupBy(needGroup,detectTypeFree);-->
<!--//         console.log(elemGroups);-->
        <!--//object that acuumulates groupped by type elements-->

        <!--// console.log(groupBy(grouu,trt));-->
        <!--// var differs=[];-->
        <!--// ancestry.forEach(function (person) {-->
        <!--//     if (byName[person.mother] != undefined ) {-->
        <!--//         differs.push(person.born-byName[person.mother].born)-->
        <!--//     }-->
        <!--// });-->
        <!--// console.log(average(differs))-->

        <!--//console.log(differs)-->

       <!--//-->
       <!--// function average (array) {-->
       <!--//     function  plus(a,b) {return a+b}-->
       <!--//     return array.reduce(plus) / array.length;-->
       <!--//-->
       <!--//     }-->
       <!--//-->
       <!--//  function female(p) {-->
       <!--//     return p.sex == 'f'-->
       <!--//  }-->
       <!--//-->
       <!--//  console.log(average(ancestry.filter(female)))-->


        <!--//-->
        <!--// function reduceAncestors(person, f, defaultValue) {-->
        <!--//     function valueFor(person) {-->
        <!--//         if (person == null)-->
        <!--//             return defaultValue;-->
        <!--//         else-->
        <!--//             return f(person, valueFor(byName[person.mother]),-->
        <!--//                 valueFor(byName[person.father]));-->
        <!--//     }-->
        <!--//     return valueFor(person);-->
        <!--// }-->

      <!--//  -->

<!--//         //flattering - generator-->
<!--//         function  genarr(arel) {-->
<!--//             var arrOfarr=[];-->
<!--//             for (var i=0; i<100; i++){-->
<!--//                 arrOfarr.push([[arel+i*6],[i],[i*56]])-->
<!--//             }-->
<!--//             return arrOfarr-->
<!--//         }-->
<!--//-->
<!--//         var ara=genarr('data');-->
<!--// console.log(ara);-->
<!--//-->
<!--// //flattering-->
<!--// var oneElem=(ara.reduce(function(a,b){-->
<!--// return  a.concat(b)-->
<!--//     }));-->
<!--//-->
<!--// console.log(oneElem);-->
<!--// //flattering to second level-->
<!--// console.log(oneElem.reduce(function(a,b){-->
<!--//    return a.concat(b)-->
<!--// }));-->
<!--//-->
<!--// //recursive solution for any levels depth-->
<!--// function flatts(arr) {-->
<!--//     function innr(arr2) {-->
<!--//         if (arr2.length == 0)-->
<!--//             return 0;-->
<!--//-->
<!--//         else if (typeof arr2 == "object" && typeof arr2[0] == "string")-->
<!--//             return arr2;-->
<!--//-->
<!--//         else //console.log(arr2);-->
<!--//         //console.log(typeof arr2);-->
<!--//-->
<!--//             return innr(arr2.reduce(function(a,b)  {-->
<!--//     return a.concat(b);}))-->
<!--//-->
<!--//     }-->
<!--//     return innr(arr)-->
<!--// }-->
<!--// console.log(flatts(ara))-->

    <script>
//===================world======================

let plan =
    ["############################",
        "# # # # ##",
        "o","o*",
        '',
        "****",
        "# *##### #",
        "## *# # P## #",
        "### P*## # #",
        "# *### #** #",
        "# #### #",
        "# o##*  #",
        "#  *#  *### #",
        "# #o #",
        "############################"];


function Grid(width,heigth) {
    this.width = width;
    this.height = heigth;
    this.space=Array(width*heigth)

};

Grid.prototype.isInside = function(vector) {
    return vector.x >=0&& vector.x < this.width &&
            vector.y >=0 && vector.y <this.height
};

Grid.prototype.get=function (vector) {
    return this.space[vector.x+this.width*vector.y];
    };

Grid.prototype.set=function (vector, value) { //assigning coordinates and according object
    this.space[vector.x+this.width*vector.y]=value;
    };



//creating vector data object
function Vector(x,y) {
    this.x=x;
    this.y=y;
    }
Vector.prototype.plus=function (other) {
return new Vector(this.x+other.x, this.y+other.y);
};

//testing
// let vec= new Vector(3,9);
// let grd= new Grid(30,40);
// grd.set(vec,'poop -> vector');
// console.log(grd.isInside(vec));
// grd.set(new Vector(1,2),'yada');
// grd.set(new Vector(5,9),'hjk');
// console.log(grd.space);
// console.log(grd.get(new Vector(3,4)));
let directions= {
    "n" : new Vector(0,-1),
    "ne" : new Vector(1,-1),
    "e" : new Vector(1,0),
    "se" : new Vector(1,1),
    "s" : new Vector(0,1),
    "sw" : new Vector(-1,1),
    "w" : new Vector(-1,0),
    "nw" : new Vector(-1,-1),
};

function randomElement(array) {
    return array[Math.floor(Math.random() * array.length)];
};

let directionNames = "n ne e se s sw w nw".split(" ");


function charFromElement(element) {
    if (element == null)
        return " ";
    else
        return element.originChar;
};

//retrieving element names from legend passed to World when creating a new World object
function elementFromChar(legend, ch) {
    if (ch == " ")
        return null;
    let element = new legend[ch]();
    element.originChar = ch;
    return element;
}

// creating world
function World(plan, legend) {
    let grid = new Grid(plan[0].length, plan.length); //retrieving dimensions of passed plan(map) and building a Grid object
    this.grid = grid;
    this.legend = legend;
    plan.forEach(function(line, y) { //disassembling map's rows and iterating over each line - filling grid with proper named objects as described in legend
        for (let x = 0; x < line.length; x++)
            grid.set(new Vector(x, y),elementFromChar(legend, line[x])); //building vectors for each character in row with object
                 //passed via legend-function elementFromChar
    });
    //this.grid.forEach(console.log,this);
};



// World.prototype.gridcustom=function () {
//     this.grid.forEach(console.log, this)
//
// }

World.prototype.toString = function() {
    let output = "";
    for (let y = 0; y < this.grid.height; y++) {
        for (let x = 0; x < this.grid.width; x++) {
            let element = this.grid.get(new Vector(x, y)); // passing newly created 'query' Vector with x and y calculated based on grid's geometry props
            output += charFromElement(element); //looping with two loops over world's rows and characterss
        }
        output += "\n"; //and adding them to output string with eol
    }
    return output;
};

function Wall() {};

Grid.prototype.forach = function(f, context) { //custom forEach that iterates over grid structure and calculating value(critter) and vector
    //console.log('grid this - no world', this);
    for (let y = 0; y < this.height; y++) {
        for (let x = 0; x < this.width; x++) {   //and calls passed function  in passed context for each value of grid
            //(first part of code iterates over grid's rows and characters and calculates value
            let value = this.space[x + y * this.width]; //core thing of the forach function - retrieving a value by custom shift y * this.width
            if (value != null) {
                f.call(context, value, new Vector(x, y));
                //f(value, new Vector(x, y));//context - .this for called function f, value - critter, new Vector - with calculated by loops x and y
            }}}

};

World.prototype.turn = function () { //World acting an objects

    let acted=[];
                //f, context to passing in forach (f.call - function, context will be passed as this, critter -value, new Vector - vector)
                //calling grid's forach with a function below
    this.grid.forach(function (critter,vector) { //critter and vector will be populated with function call in forach
        //console.log('this from World',this);
        //console.log(critter,vector);
        if (critter.act && acted.indexOf(critter) == -1){
            acted.push(critter); //after manipulations above critter and vector will be calculated and available in this context
            this.letAct(critter,vector); //so passing critter, vector //arguments passed fine, but f without .call affects that tis .Act method could not be retrieved in this that now is a global object...
        }
    },this);

};

//internal World's method
World.prototype.letAct=function (critter,vector) {
    let action = critter.act(new View (this, vector)); //critter get a View object and a vector  andr eturns its action
    if (action && action.type == 'move'){
        let dest = this.checkDestination(action, vector);
        if (dest && this.grid.get(dest) == null) {
            this.grid.set(vector,null);
            this.grid.set (dest,critter)
        }
    }
};

//internal World's method
World.prototype.checkDestination=function (action,vector) {
    //console.log('action, vector(cur position) passed to checkDestination',action,vector);
    if (directions.hasOwnProperty(action.direction)){
        let dest = vector.plus(directions[action.direction]);
        if (this.grid.isInside(dest)){
            console.log(dest);
            return dest};
    }

};
//View - middle object for creatures interaction with world -passing such an object to creature.act function
//usage: critter.act(new View (this, vector))

function View (world, vector) {
    this.world = world;
    this.vector = vector;
    };

//searching part
// returning element that on the way of creature
View.prototype.look = function (dir) {
    let target = this.vector.plus(directions[dir]);
    if (this.world.grid.isInside(target))
        return charFromElement(this.world.grid.get(target));
else return "#";
};

View.prototype.findAll = function (ch) { //collects all looked ch into array with directions
    console.log('findal called with ', ch);
    let found = [];
    for (var dir in directions)
        if (this.look(dir) == ch)
            found.push(dir);
    console.log('found all',found);
    return found;
};


View.prototype.find = function (ch) {
    let found = this.findAll(ch);
    if (found.length == 0) return null;
    return randomElement(found); //retrieving a random element from found directions
};

function dirPlus(dir, n) {
    console.log('dirPlus called', dir,n);
    let index = directionNames.indexOf(dir); //calculating position index in directions
    //"n ne e se s sw w nw"
    console.log('dirPlus returned',directionNames[(index + n + 8) % 8]);
    return directionNames[(index + n + 8) % 8]; //(position+coeff+8) %8
};


//
// BouncingCritter.prototype.act = function(view) {
//     if (view.look(this.direction) != " ")
//         this.direction = view.find(" ") || "s";
//     return {type: "move", direction: this.direction};
// };
//
//
// function WallFollwer() {
//     this.dir='s';
// };

// WallFollwer.prototype.act=function (view) {
//
//         let start=this.dir; // normally this.dir is s
//
//     console.log('looking at this ->',view.look(dirPlus(this.dir, -3)), '<-if this not empty - start and this.dir to -2');
//
//     //stucking part - looking forward to -3, and if it occupied - going to neighbor direction cell -2
//     if (view.look(dirPlus(this.dir, -3)) != ' ') {
//         console.log('assigning -2', view.look(dirPlus(this.dir, -2))); //putting to -2
//         start = this.dir = dirPlus(this.dir, -2);
//         console.log('start',start);
// };
//     //in any case  trying to find something for rellocation
//     // no matter if this -2 location is occupied or not - no sense - moving
// while (view.look(this.dir) != ' '){
//         this.dir = dirPlus(this.dir, 1); //trying to find something free there
//         //console.log('got', view.look(this.dir),'trying with another direction:',this.dir);
//         if (this.dir == start){console.log('dir==start, breaking'); break}; //emergency exit if it stuck
//         ;
//             }
//             //console.log('moving critter to',this.dir);
//     return {type:'move', direction: this.dir};
// };

//-----------------------------------------new world
function LifelikeWorld(map, legend) {
    World.call(this, map, legend);
}

LifelikeWorld.prototype = Object.create(World.prototype);

let actionTypes = Object.create(null);

LifelikeWorld.prototype.letAct = function(critter, vector) {

    let action = critter.act(new View(this, vector));

    let handled = action &&
        action.type in actionTypes &&
        actionTypes[action.type].call(this, critter,
            vector, action);
    if (!handled) {
        critter.energy -= 0.2;
        if (critter.energy <= 0)
            this.grid.set(vector, null);
    }
};

actionTypes.grow = function(critter) {
    critter.energy += 0.5;
    return true;
};

actionTypes.move = function(critter, vector, action) {

    let dest = this.checkDestination(action, vector);
    if (dest == null ||
        critter.energy <= 1 ||
        this.grid.get(dest) != null)
        return false;

    if (critter.constructor==Predator) //for predator movement is harder
        critter.energy -= 2;
    critter.energy -= 1;
    this.grid.set(vector, null);
    this.grid.set(dest, critter);
    return true;
};

actionTypes.eat = function(critter, vector, action) {
    let dest = this.checkDestination(action, vector);
    let atDest = (dest != null) && this.grid.get(dest); //something eatable -if dest != null, getting

    if (!atDest || atDest.energy == null) // atDest inverted because we deciding to return false - if true or true return false
        return false;

    critter.energy += atDest.energy;
    this.grid.set(dest, null);
    return true;
};

actionTypes.reproduce = function(critter, vector, action) {
    let baby = elementFromChar(this.legend,
        critter.originChar);
    let dest = this.checkDestination(action, vector);
    if (dest == null ||
        critter.energy <= 2 * baby.energy ||
        this.grid.get(dest) != null)
        return false;
    critter.energy -= 2 * baby.energy;
    this.grid.set(dest, baby);
    return true;
};

function Plant() {
    this.energy = 3 + Math.random() * 4;
}

Plant.prototype.act = function(view) {
    if (this.energy > 40) {
            }
       var space = view.find(" ");
        if (this.dir)
            return {type: "reproduce", direction: space};

    if (this.energy < 20)
        return {type: "grow"};
};

function PlantEater() {
    this.energy = 30;
    this.dir='s';
}
PlantEater.prototype.act = function(view) {
    var start = this.dir;
    //------------
    //console.log('looking at this ->',view.look(dirPlus(this.dir, -3)), '<-if this not empty - start and this.dir to -2');
    //stucking part - looking forward to -3, and if it occupied - going to neighbor direction cell -2
    if (view.look(dirPlus(this.dir, -3)) != ' ')
           start=this.dir = dirPlus(this.dir, -2);
        while (view.look(this.dir) != ' ') {
            this.dir = dirPlus(this.dir, 1); //trying to find something free there
            if (this.dir == start) {
                console.log('dir==start, breaking');
                break
            }; //emergency exit if it stuck
        };

    //------------
    if (this.energy > 60 && space)
        return {type: "reproduce", direction: space};

    var plant = view.find("*");
    if (plant )
        return {type: "eat", direction: plant};
    if (this.dir != start)
        return {type: "move", direction: this.dir};

};
function Predator() {
    this.energy = 20;
}
Predator.prototype.act = function(view) {
    var space = view.find(" ");
    if (this.energy > 30 && space)
        return {type: "reproduce", direction: space};
    var planteater = view.find("o");
    if (planteater)
        return {type: "eat", direction: planteater};
    if (space)
        return {type: "move", direction: space};

};
//creating world

let world = new LifelikeWorld(plan, {'#': Wall, 'o': PlantEater, '*': Plant, 'P':Predator});
for (let i=0; i<5000; i++){
    world.turn();
    console.log(world.toString())
};


//world.gridcustom();

// let PooopWorld=function (map, legend) {
//    this.map=map;
//    this.legend=legend;
// };
//
// PooopWorld.prototype=Object.create(World.prototype);
//
//
// PooopWorld.prototype.run=function () {
//
//     return (this.legend+' and '+ this.map) ;
//
// };


// let pworld= new PooopWorld('this is a map', 'this is a poop legend');
// console.log(pworld.run());
//
// console.log(dirPlus('s',8));

//==============object-this- call to other object function======
//
// function Pronka (name) {
//     this.name=name;
// }
// function Americanin(name) {
//     this.name = name;
//     this.pronka = new Pronka('Greznoy', 'selling Inostranny Tovary, god damnit! from ' + this.name);
//
// };
// Pronka.prototype.sell=function (context,f) {
//
//     f.call(context, this.home); //just dumb function call with given context - passing value to context obj. function scope
// };
// Americanin.prototype.res=function () {
//     console.log(this.pronk, 'from Americanin obj')
// };
//
// Americanin.prototype.start=function()
// {
//     //
//     this.pronka.sell(this, function (pronkan) {
//
//         this.pronk=pronkan;
//     });
// };
//
// let amer= new Americanin('John');
// amer.start();
// amer.res();
//
// //Output:
// //Greznoy
// //Greznoy from Americanin obj


// ======================exercises ===================
//vector
// function Vectr(x, y) {
//     this.x = x;
//     this.y = y;
//
// };
//
// Vectr.prototype.plus=function (vector) {
//     return new Vectr(vector.x+this.x, vector.y+this.y);
// };
//
// Vectr.prototype.minus=function (vector) {
//     return new Vectr(this.x-vector.x, this.y-vector.y);
// };
//
// Vectr.prototype.length=function () {
//     return Math.sqrt(this.x^2+this.y^2)
//
// };
//
// //creating objects
// let nvectr = new Vectr(67,45);
// let nvectrs = new Vectr(7,44);
//
// //calculating summ or diffrence - passing one vector to other's vector function
// console.log(nvectr.minus(nvectrs));
// console.log(nvectr.plus(nvectrs));
// //calculating vector's lengt
// console.log(nvectr.length());
// console.log(nvectrs.length());
//
// //another cell++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// var MOUNTAINS = [
//     {name: "Kilimanjaro", height: 5895, country: "Tanzania"},
//     {name: "Everest", height: 8848, country: "Nepal"},
//     {name: "Mount Fuji", height: 3776, country: "Japan"},
//     {name: "Mont Blanc", height: 4808, country: "Italy/France"},
//     {name: "Vaalserberg", height: 323, country: "Netherlands"},
//     {name: "Denali", height: 6168, country: "United States"},
//     {name: "Popocatepetl", height: 5465, country: "Mexico"}
// ];
// function rowHeights(rows) {
//     return rows.map(function(row) {
//         return row.reduce(function(max, cell) {
//             return Math.max(max, cell.minHeight());
//         }, 0);
//     });
// }
//
// function colWidths(rows) {
//     return rows[0].map(function(_, i) {
//         return rows.reduce(function(max, row) {
//             return Math.max(max, row[i].minWidth());
//         }, 0);
//     });
// }
//
// function drawTable(rows) {
//     var heights = rowHeights(rows);
//     var widths = colWidths(rows);
//     function drawLine(blocks, lineNo) {
//         return blocks.map(function(block) {
//             return block[lineNo];
//         }).join(" ");
//     }
//
//     function drawRow(row, rowNum) {
//         var blocks = row.map(function(cell, colNum) {
//             return cell.draw(widths[colNum], heights[rowNum]);
//         });
//         return blocks[0].map(function(_, lineNo) {
//             return drawLine(blocks, lineNo);
//         }).join("\n");
//     }
//
//     return rows.map(drawRow).join("\n");
// }
//
// function repeat(string, times) {
//     var result = "";
//     for (var i = 0; i < times; i++)
//         result += string;
//     return result;
// }
//
// function TextCell(text) {
//     this.text = text.split("\n");
// }
//
// TextCell.prototype.minWidth = function() {
//     return this.text.reduce(function(width, line) {
//         return Math.max(width, line.length);
//     }, 0);
// };
//
// TextCell.prototype.minHeight = function() {
//     return this.text.length;
// };
//
// TextCell.prototype.draw = function(width, height) {
//     var result = [];
//     for (var i = 0; i < height; i++) {
//         var line = this.text[i] || "";
//         result.push(line + repeat(" ", width - line.length));
//     }
//     return result;
// };
// // my cell implementation
// //---------------------------------------------------------------------------
// function StretchCell(inner, width, height) {
//     this.mwidth=width;
//     this.mheight=height;
//     this.inner = inner;
// }
//
// StretchCell.prototype.minWidth = function() {
//     return this.inner.minWidth();
// };
//
// StretchCell.prototype.minHeight = function() {
//     return this.inner.minHeight() + 1;
// };
//
// StretchCell.prototype.draw = function(width, height) {
//     width = width < this.mwidth ? this.mwidth : width;
//     height = height < this.mheight ? this.mheight : height;
//     return this.inner.draw(width, height);
// };
//
//
// //---------------------------------------------------------------------------
// function UnderlinedCell(inner) {
//     this.inner = inner;
// }
//
// UnderlinedCell.prototype.minWidth = function() {
//     return this.inner.minWidth();
// };
//
// UnderlinedCell.prototype.minHeight = function() {
//     return this.inner.minHeight() + 1;
// };
//
// UnderlinedCell.prototype.draw = function(width, height) {
//     return this.inner.draw(width, height - 1).concat([repeat("-", width)]);
// };
//
// function dataTable(data) {
//     var keys = Object.keys(data[0]);
//     var headers = keys.map(function(name) {
//         return new UnderlinedCell(new TextCell(String(name)));
//     });
//     var body = data.map(function(row) {
//         return keys.map(function(name) {
//             var value = row[name];
//             return new StretchCell(new RTextCell(String(value)),20,7);
//
//         });
//     });
//     return [headers].concat(body);
// }
//
// function RTextCell(text) {
//     TextCell.call(this, text);
// }
//
// RTextCell.prototype = Object.create(TextCell.prototype);
//
// RTextCell.prototype.draw = function(width, height) {
//     var result = [];
//     for (var i = 0; i < height; i++) {
//         var line = this.text[i] || "";
//         result.push(repeat(" ", width - line.length) + line);
//     }
//     return result;
// };

//console.log(drawTable(dataTable(MOUNTAINS)));


//+++++++++++++++++++++++++sequence interface+++++++++++++++++++++++++
// let collection={568:'dgf',
//     'hhhh':'543',687:'23423',6867:'23423',6807:'23423'};
//
// let scollection={5608:'dgf',
//     'hhhh':'543',687:'23423'};
//
// let arrray=['454',
//     'yrty','23423',
//     234234,33,'iopui','df'];
//
// //iterating over a array by index
// function SequenceIt(seq) {
//     let objtoarr=function (seq) {
//         let arr=[];
//         for(let s in seq)
//              arr.push({s:seq[s]})
//         return arr};
//
//     //deciding is thia an array or object
//     Array.isArray(seq)? this.seq=seq:this.seq=objtoarr(seq)
//
// };
//
// SequenceIt.prototype.getByIndex = function (ind) {
//     //verifying that asked data lays in our object
//     if (this.seq.length > ind && this.seq.length >= 0 )
//     return this.seq.filter(function (elem, i) {
//             if (i == ind)
//                 return elem
//         });
//     //in case of invalid range
//     else return 'Requested index is out of range'
// };
//
// SequenceIt.prototype.getFirstFive = function () {
//     let ind=this.seq.length >= 5? 5:this.seq.length;
//     return this.seq.filter(function (cur, i) {
//         if(i <ind) return cur;
//     })
// };
// //creating object and loading data
// let arrObj = new SequenceIt(arrray);
// console.log(arrObj.getByIndex(3));
// console.log(arrObj.getFirstFive());
//
// //object section
// let objObj = new SequenceIt(scollection);
// console.log(objObj.getByIndex(2));
// console.log(objObj.getFirstFive());
//
// //new type that calls Sequence it with prebuilt array from-to range
//
// function RangeToSeq(fro, to) {
//    let seq=[];
//    for (let i=fro;i<to;i++)
//        seq.push(i)
//     SequenceIt.call(this,seq)
// }
//
// //inherit prototype, no additional functions needed for this type - generating only specific object type
// RangeToSeq.prototype=SequenceIt.prototype;
//
// let rts= new RangeToSeq(45,90);
// console.log(rts.getFirstFive());
// console.log(rts.getByIndex(3));


//=========================just usage training========================
//Inheritance - prototype assigning
//function.prototype describes what will be a __proto__ of a new object
// created based on this function


// function elfTree(gh) {
// this.ghlen=gh.split("");
//     this.gh=this.ghlen.map(function (g) {
//         return  g*40}
//
//     )};
//
// elfTree.colorr=90000;
//
// elfTree.prototype.magic=function () {
//     console.log( this.ghlen,'magic dwarf')
//
// };
//
// function oldElf() {
//
// }
//
// oldElf.prototype=Object.create(elfTree.prototype);
//
// oldElf.prototype.retcol=function () {
//     this.colorr=this.__proto__.constructor.colorr; //trying to brake up the system and get
//                         //value of main constructor's color
//     console.log(this.colorr)
//
// };
// let retelf= new oldElf();
//
// console.log(retelf instanceof elfTree);
// retelf.retcol();
//
// function GandElf(el) {
//
// elfTree.call(this,el) //when creating object, passing this to elfTree function with some data for calculations
//
//
// };
//
//
//
// GandElf.prototype=Object.create(elfTree.prototype); //creating new prototype property with a
// // copied unlinked elfTree
//
// GandElf.prototype.wish=function () {
//
//     console.log('GandElf wishing')
//
// };
//
// console.log(GandElf.prototype);
// console.log(elfTree.prototype);
//
// function ZupElf (el){
//     elfTree.call(this,el)
// };
// ZupElf.prototype=Object.create(GandElf.prototype);
//
// ZupElf.prototype.woosh=function () { console.log('ZupElf wishing')};
//
// elfTree.prototype.sharedWork=function () {
//     console.log('shared work for elfs')
//
// };
//
// console.log(ZupElf.prototype);
// let zuppelelf=new ZupElf('6 90 6700'); //feeding data when creating new ZupElf object, using calculation logic from elfTree
//
// console.log(zuppelelf.gh); //retrieving data
// console.log(zuppelelf.ghlen);
//
// zuppelelf.sharedWork();
//
// let ultaelf= new GandElf('7');
// ultaelf.magic();


//ultaelf.woosh(); //not working because prototype assigned via new object (inherited) in case of direct
//assignment adding a function via prototype propery will affect on all derived objects


// console.dir(oldlf.__proto__);
// console.dir(grandelf.__proto__);
//
// grandelf.magic();
// grandelf.magic2();

//console.dir(elfTree.prototype);
//console.log(oldElf.__proto__ ===elfTree.prototype)


//=====================================================
//
// function doit() {
//     console.log(this.consid);
//     console.log(arguments || '');
// }
//
// function CatTinking(consid) {
//     this.consid=consid
// };
//
// let nccat = new CatTinking('43');
// doit.call(nccat)
// //
// CatTinking.prototype.action=function () {
//     if(this.consid == 'hungry')
//         return 'hrm-hrm';
//     else if (this.consid == 'tired')
//         return 'Zzzzzz';
//     else return 'Confused'
// };
//
// let lazyCat=new CatTinking('hungry');
// console.log(lazyCat.action());
// lazyCat.consid='tired';
// console.log(lazyCat.action());
//
//
//
// function CatPatchAction(patch) {
//     CatTinking(this, patch);
// };
//    CatPatchAction.prototype=Object.create(CatTinking.prototype);
//    let nCat= new  CatPatchAction('tired');
//     console.log(nCat);
//
// //Call training
// doit.apply(lazyCat, ['kaka','paka']);
// doit.call(lazyCat,'kaka','pukka')



// //==============================object with request  function====================
//
// let PityParty={puddels:'shtrudels',
//     clown_:'sad clown',
//     instruments_:['piano', 'royal', 'sax'],
//     persData:'Next cocert of Sad clown next saturday morning in Radisson S. music hall',
//     objinfo:function (req) {
//         switch(req) {
//             case "data":
//                 return this.persData;
//
//             case 'dataL':
//                 return this.persData.length;
//
//             default:
//                 return 'unrecognized request'
//         }
//     }
// };
// console.log(PityParty.objinfo('dataL'))


// //getters/setters
// let PityParty={puddels:'shtrudels',
//     clown_:'sad clown',
//     instruments_:['piano', 'royal', 'sax'],
// get clown(){return this.clown_},
// get instruments(){return this.instruments_},
// set instruments(instr) {this.instruments_=instr}
// };
// console.log(PityParty.instruments);
// PityParty.instruments='no instruments for PityParty today';
// console.log(PityParty.instruments);
// console.log(PityParty.clown, 'before changing');
// PityParty.clown='Brave clown';
// console.log(PityParty.clown, 'after changing');
//



// //higher order functions
//     let arr= [{
//     name:'Pukkeman', bld:1, street: 'Weitzmann', appart:'12', status:'done',account:432, message:
//             ['explain to you how all',
//                 ' this mistaken idea of denouncing',
//                 'pleasure and praising pain',
//                 'was born and I will give you',
//                 'a complete account of the system']},
//
//     {name:'Folk', bld:40, street: 'Weitzmann', appart:'12', status:'done',account:132,message:['ex plain to you how all',
//             ' this mistaken idea of denouncing',
//             'pleasure and prai sing pain',
//             'was born and I w ill give you',
//             'a complete accou nt of the system']},
//     {name:'Crust', bld:23, street: 'HaTayas', appart:'12', status:'done',account:632, message:['explain to you how all',
//             ' this mistaken idea of denouncing',
//             'pleasure and pra ising pain',
//             'was  born and I will give you',
//             'a com plete account of the system']},
//     {name:'Robin', bld:2, street: 'Lenina', appart:'12', status:'pending',account:32,message:['explain to you how all',
//             ' this mistaken idea of denouncing',
//             'plea ure a nd praising pain',
//             'was born and I will give you',
//             'a com plete account of the system']
//     }];
//
// //some factory object training
//    let persObj=arr.filter(a => a.name == 'Robin');
//    let newarrObj=persObj.map(o => {
//        console.log(o);
//    let newObj=Object.create(o);
//    newObj.ident='created by map at row 974';
//    return newObj
//    });
//    console.log(newarrObj[0].name, '- is name of factoried object '+ newarrObj[0].ident);
//
//     //chaining with arrow functions
//     let arrmapfilter= arr.filter(a=>a.bld>20).map(a=> {
//     a.account=a.account*20;
//     return a });
//     console.log(arrmapfilter, 'arrmapfilter');
//
//     //foreach arrow usage
//     arr.forEach(a=> console.log(a.message.join('#')));
//
//
//     //reduce - arrow
//     let arredu= arr.reduce(((sum,cur) => sum+=cur.account),0);
//     console.log(arredu, 'arrow reduce');
//
//     //reduce
//     let summacc=arr.reduce(function (sum,cur) {
//     sum+=cur.account;
//     return sum},0);
//     console.log(summacc);
//     //map transforming via map
//     let transform=arr.map(function (value) {
//         value.building=value.bld;
//         value.bld=0;
//         return value.status
//     });
//     console.log(transform);
//     console.log(arr);
//     //arrow - map
//     let arrowmap=arr.map((a,i) => {
//         let vtr=a.status;
//         return a.building+'/1'+vtr+i});
//     console.log(arrowmap);
//
//     //filrer - arrow
//     let arrowfilter = arr.filter((e)=> e.street=='HaTayas');
//
//     arrowfilter.forEach((a)=>console.log(a.name,'filtered by arrowfilter'));
//
//     //filter
//     let filteredStreet=arr.filter(function (value) {
//     let resultob=value.street == 'Weitzmann';
//     return resultob; });
//
//     //foreach action
//     filteredStreet.forEach(function (pers) {
//         console.log(pers.street) });
//
//     //map return names
//     let weitzmannNames=filteredStreet.map(function (pers) {
//         return pers.name });
//     console.log(weitzmannNames);

//constructors
// function Cat() { this.cattype= 'cat type';
//                     this.catProfession = 'default cat profession' ;
//                     this.getcatProf = function () {
//                         return this.catProfession || 'no profession';
//
//                    }
// };
// var junkcat=new Cat();
// junkcat.cattype = 'junkcat';
// //console.log(junkcat.cattype);
// console.log(junkcat.getcatProf.bind(Cat)());
// console.log(junkcat.getcatProf());
//========================================================================
// //bind - this  - binding function to other object properties
//     //creating object with desired properties
//     var defaultcat = {live: 'default place', eating: 'food'
//     };
//
//     var brat = { live: 'in backyard', eating: 'junk'
//     };
//
//     var kotya = {live: 'in our yard', eating: 'meat'
//     };
//
//     var  whereliving = {};
//     whereliving.whereCatLiving=function() { console.log(this.live)
//     };
//     whereliving.live=defaultcat.live;
//     whereliving.eating=defaultcat.eating;
//
//
//     var bratliving=whereliving.whereCatLiving.bind(brat);
//
//     bratliving();
//
//     var kotyaliving = whereliving.whereCatLiving.bind(kotya);
//     kotyaliving();
//
//     whereliving.whereCatLiving();





//object crreation via prototype and Object.create
//         var Cup ={material: 'default material', purpose: 'default purpose'};
//         var teacup=Object.create(Cup);
//
//         teacup.material='steel';
//         console.log(teacup.material);
//
//         Cup.material='wood';
//
//
//         var mycup={};
//         Object.setPrototypeOf(mycup,Cup);
//         mycup.material='steel';
//         console.log(mycup.material);
//         console.log(Cup.material)

// //==============================functors============================
// function strDecode(value,fun) {
//     let chars=value.split('');
//     console.log(chars);
//
//     return chars.map(function(char) {
//
//        return fun(char.charCodeAt(0))
//     })
// }
// function root (val) {
//     return val*val
// }
// console.log(strDecode('gty',root));
// //============================recursion========================================
// let arr = [78,[[[[[]]]]],[12,[32,[56]]],[234,[234,[34,[234,[234]]]]],[[23],[2323]],34,[[[]]]];
// let len=0;
// function unpack(arr) {
//     function inner(arr) {
//         len+=arr.length;
//         return arr.forEach(function (value) {
//             return unpack(value)})}
//
//             if (typeof(arr) == 'object')
//         return inner(arr);
//
// }
// unpack(arr);
// console.log(len)

//

        </script>
        <!--var ANCESTRY_FILE = JSON.stringify([-->
            <!--{"name": "Carolus Haverbeke", "sex": "m", "born": 1832, "died": 1905, "father": "Carel Haverbeke", "mother": "Maria van Brussel"},-->
            <!--{"name": "Emma de Milliano", "sex": "f", "born": 1876, "died": 1956, "father": "Petrus de Milliano", "mother": "Sophia van Damme"},-->
            <!--{"name": "Maria de Rycke", "sex": "f", "born": 1683, "died": 1724, "father": "Frederik de Rycke", "mother": "Laurentia van Vlaenderen"},-->
            <!--{"name": "Jan van Brussel", "sex": "m", "born": 1714, "died": 1748, "father": "Jacobus van Brussel", "mother": "Joanna van Rooten"},-->
            <!--{"name": "Philibert Haverbeke", "sex": "m", "born": 1907, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
            <!--{"name": "Jan Frans van Brussel", "sex": "m", "born": 1761, "died": 1833, "father": "Jacobus Bernardus van Brussel", "mother":null},-->
            <!--{"name": "Pauwels van Haverbeke", "sex": "m", "born": 1535, "died": 1582, "father": "N. van Haverbeke", "mother":null},-->
            <!--{"name": "Clara Aernoudts", "sex": "f", "born": 1918, "died": 2012, "father": "Henry Aernoudts", "mother": "Sidonie Coene"},-->
            <!--{"name": "Emile Haverbeke", "sex": "m", "born": 1877, "died": 1968, "father": "Carolus Haverbeke", "mother": "Maria Sturm"},-->
            <!--{"name": "Lieven de Causmaecker", "sex": "m", "born": 1696, "died": 1724, "father": "Carel de Causmaecker", "mother": "Joanna Claes"},-->
            <!--{"name": "Pieter Haverbeke", "sex": "m", "born": 1602, "died": 1642, "father": "Lieven van Haverbeke", "mother":null},-->
            <!--{"name": "Livina Haverbeke", "sex": "f", "born": 1692, "died": 1743, "father": "Daniel Haverbeke", "mother": "Joanna de Pape"},-->
            <!--{"name": "Pieter Bernard Haverbeke", "sex": "m", "born": 1695, "died": 1762, "father": "Willem Haverbeke", "mother": "Petronella Wauters"},-->
            <!--{"name": "Lieven van Haverbeke", "sex": "m", "born": 1570, "died": 1636, "father": "Pauwels van Haverbeke", "mother": "Lievijne Jans"},-->
            <!--{"name": "Joanna de Causmaecker", "sex": "f", "born": 1762, "died": 1807, "father": "Bernardus de Causmaecker", "mother":null},-->
            <!--{"name": "Willem Haverbeke", "sex": "m", "born": 1668, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Pieter Antone Haverbeke", "sex": "m", "born": 1753, "died": 1798, "father": "Jan Francies Haverbeke", "mother": "Petronella de Decker"},-->
            <!--{"name": "Maria van Brussel", "sex": "f", "born": 1801, "died": 1834, "father": "Jan Frans van Brussel", "mother": "Joanna de Causmaecker"},-->
            <!--{"name": "Angela Haverbeke", "sex": "f", "born": 1728, "died": 1734, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Elisabeth Haverbeke", "sex": "f", "born": 1711, "died": 1754, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
            <!--{"name": "Lievijne Jans", "sex": "f", "born": 1542, "died": 1582, "father":null, "mother":null},-->
            <!--{"name": "Bernardus de Causmaecker", "sex": "m", "born": 1721, "died": 1789, "father": "Lieven de Causmaecker", "mother": "Livina Haverbeke"},-->
            <!--{"name": "Jacoba Lammens", "sex": "f", "born": 1699, "died": 1740, "father": "Lieven Lammens", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Pieter de Decker", "sex": "m", "born": 1705, "died": 1780, "father": "Joos de Decker", "mother": "Petronella van de Steene"},-->
            <!--{"name": "Joanna de Pape", "sex": "f", "born": 1654, "died": 1723, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
            <!--{"name": "Daniel Haverbeke", "sex": "m", "born": 1652, "died": 1723, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Lieven Haverbeke", "sex": "m", "born": 1631, "died": 1676, "father": "Pieter Haverbeke", "mother": "Anna van Hecke"},-->
            <!--{"name": "Martina de Pape", "sex": "f", "born": 1666, "died": 1727, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
            <!--{"name": "Jan Francies Haverbeke", "sex": "m", "born": 1725, "died": 1779, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Maria Haverbeke", "sex": "m", "born": 1905, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
            <!--{"name": "Petronella de Decker", "sex": "f", "born": 1731, "died": 1781, "father": "Pieter de Decker", "mother": "Livina Haverbeke"},-->
            <!--{"name": "Livina Sierens", "sex": "f", "born": 1761, "died": 1826, "father": "Jan Sierens", "mother": "Maria van Waes"},-->
            <!--{"name": "Laurentia Haverbeke", "sex": "f", "born": 1710, "died": 1786, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
            <!--{"name": "Carel Haverbeke", "sex": "m", "born": 1796, "died": 1837, "father": "Pieter Antone Haverbeke", "mother": "Livina Sierens"},-->
            <!--{"name": "Elisabeth Hercke", "sex": "f", "born": 1632, "died": 1674, "father": "Willem Hercke", "mother": "Margriet de Brabander"},-->
            <!--{"name": "Jan Haverbeke", "sex": "m", "born": 1671, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Anna van Hecke", "sex": "f", "born": 1607, "died": 1670, "father": "Paschasius van Hecke", "mother": "Martijntken Beelaert"},-->
            <!--{"name": "Maria Sturm", "sex": "f", "born": 1835, "died": 1917, "father": "Charles Sturm", "mother": "Seraphina Spelier"},-->
            <!--{"name": "Jacobus Bernardus van Brussel", "sex": "m", "born": 1736, "died": 1809, "father": "Jan van Brussel", "mother": "Elisabeth Haverbeke"}-->
        <!--]);-->

        <!--var ancestry = JSON.parse(ANCESTRY_FILE);-->

        <!--var theSet = ["Carel Haverbeke", "Maria van Brussel",-->
            <!--"Donald Duck"];-->
        <!--function isInSet(set, person) {-->
            <!--return set.indexOf(person.name) > -1;-->
        <!--}-->

        <!--console.log(isInSet(theSet,"Carel Haverbeke"));-->

        <!--console.log(ancestry.map(function(person) {-->
            <!--return isInSet(theSet, person);-->
        <!--}));-->
        <!--//-->
        <!--console.log(ancestry.filter(isInSet.bind(null, theSet)));-->

        <!--// function noisy(f) {-->
        <!--//     return function()-->
        <!--// {-->
        <!--//         console.log("calling with");-->
        <!--//         var val = f.apply(null,arguments);-->
        <!--//-->
        <!--//         return val;-->
        <!--//     };-->
        <!--// }-->
        <!--// noisy(console.log)(5675,6575,56756756);-->

        <!--// â†’ calling with 0-->
        <!--// â†’ called with 0 - got false-->
        <!--//retrieves a moter and father for all given person's ancestors and applies given function-->

<!--//         function reduceAncestors(person, f, defaultValue) {-->
<!--//             //console.log('reduceAncestors called with', person.name,f,defaultValue);-->
<!--//             function valueFor(person) {-->
<!--//                 //console.log('inner valueFor called with', person,f,defaultValue);-->
<!--//                 if (person == null){-->
<!--//                     return defaultValue;}-->
<!--//                 else-->
<!--//                    return f(person, valueFor(byName[person.mother]),-->
<!--//                         valueFor(byName[person.father]));-->
<!--//             }-->
<!--//             return valueFor(person);-->
<!--//         }-->
<!--//-->
<!--//-->
<!--//         function sharedDNA(person, fromMother, fromFather) {-->
<!--//             //console.log('DNA called with ',person.name,fromMother, fromFather);-->
<!--//             if (person.name == "Pauwels van Haverbeke")-->
<!--//                 return 1;-->
<!--//             else-->
<!--//                 return (fromMother + fromFather) / 2;-->
<!--//         }-->
<!--//-->
<!--//         var byName = {};-->
<!--//         ancestry.forEach(function(person) {-->
<!--//             byName[person.name] = person;-->
<!--//         });-->
<!--//-->
<!--//         //console.log(byName);-->
<!--//         var ph = byName["Philibert Haverbeke"];-->
<!--//-->
<!--//         console.log(reduceAncestors(ph,sharedDNA,0)/4);-->
<!--//-->
<!--//         //console.log(average(ancestry.filter(male)))-->
<!--//         // Your code here.-->
<!--// var yu= [5,4,76,65,6];-->
<!--// function  coco(arr) {-->
<!--//     var why= 5-9 && arr[3];-->
<!--//     console.log(why);-->
<!--//     return why ? 4:'fff'-->
<!--// }-->
<!--//-->
<!--// console.log(coco(yu));-->
<!--//-->
<!--//-->
<!--//-->
<!--//         function countAncestors(person, test) {-->
<!--//             function combine(current, fromMother, fromFather) {-->
<!--//                 //if current != person then executing test-->
<!--//                 var thisOneCounts = current != person && test(current);-->
<!--//                 //console.log(current != person,test);-->
<!--//                 //console.log(fromMother+ fromFather,thisOneCounts);-->
<!--//                 return fromMother + fromFather + (thisOneCounts ? 1 : 0);-->
<!--//             }-->
<!--//             return (person, combine, 0);-->
<!--//         }-->
<!--//-->
<!--//         function longLivingPercentage(person) {-->
<!--//             var all = countAncestors(person, function(person) {-->
<!--//                 return true;-->
<!--//             });-->
<!--//             var longLiving = countAncestors(person, function(person) {-->
<!--//                 return (person.died - person.born) >= 70;-->
<!--//             });-->
<!--//             //console.log(longLiving,all);-->
<!--//             return longLiving / all;-->
<!--//         }-->
<!--//         console.log(longLivingPercentage(byName["Emile Haverbeke"]));-->
<!--//         // â†’ 0.129-->
        <!--function age(per) {-->
            <!--return per.died-per.born-->
        <!--}-->

        <!--function male(per) {-->
            <!--return per.sex == 'm';-->

        <!--}-->
        <!--function female(per) {-->
            <!--return per.sex == 'f';-->
        <!--}-->

        <!--function diedBefore1743(per) {-->
            <!--return per.died <=1743-->

        <!--}-->
        <!--var ANCESTRY_FILE = JSON.stringify([-->
            <!--{"name": "Carolus Haverbeke", "sex": "m", "born": 1832, "died": 1905, "father": "Carel Haverbeke", "mother": "Maria van Brussel"},-->
            <!--{"name": "Emma de Milliano", "sex": "f", "born": 1876, "died": 1956, "father": "Petrus de Milliano", "mother": "Sophia van Damme"},-->
            <!--{"name": "Maria de Rycke", "sex": "f", "born": 1683, "died": 1724, "father": "Frederik de Rycke", "mother": "Laurentia van Vlaenderen"},-->
            <!--{"name": "Jan van Brussel", "sex": "m", "born": 1714, "died": 1748, "father": "Jacobus van Brussel", "mother": "Joanna van Rooten"},-->
            <!--{"name": "Philibert Haverbeke", "sex": "m", "born": 1907, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
            <!--{"name": "Jan Frans van Brussel", "sex": "m", "born": 1761, "died": 1833, "father": "Jacobus Bernardus van Brussel", "mother":null},-->
            <!--{"name": "Pauwels van Haverbeke", "sex": "m", "born": 1535, "died": 1582, "father": "N. van Haverbeke", "mother":null},-->
            <!--{"name": "Clara Aernoudts", "sex": "f", "born": 1918, "died": 2012, "father": "Henry Aernoudts", "mother": "Sidonie Coene"},-->
            <!--{"name": "Emile Haverbeke", "sex": "m", "born": 1877, "died": 1968, "father": "Carolus Haverbeke", "mother": "Maria Sturm"},-->
            <!--{"name": "Lieven de Causmaecker", "sex": "m", "born": 1696, "died": 1724, "father": "Carel de Causmaecker", "mother": "Joanna Claes"},-->
            <!--{"name": "Pieter Haverbeke", "sex": "m", "born": 1602, "died": 1642, "father": "Lieven van Haverbeke", "mother":null},-->
            <!--{"name": "Livina Haverbeke", "sex": "f", "born": 1692, "died": 1743, "father": "Daniel Haverbeke", "mother": "Joanna de Pape"},-->
            <!--{"name": "Pieter Bernard Haverbeke", "sex": "m", "born": 1695, "died": 1762, "father": "Willem Haverbeke", "mother": "Petronella Wauters"},-->
            <!--{"name": "Lieven van Haverbeke", "sex": "m", "born": 1570, "died": 1636, "father": "Pauwels van Haverbeke", "mother": "Lievijne Jans"},-->
            <!--{"name": "Joanna de Causmaecker", "sex": "f", "born": 1762, "died": 1807, "father": "Bernardus de Causmaecker", "mother":null},-->
            <!--{"name": "Willem Haverbeke", "sex": "m", "born": 1668, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Pieter Antone Haverbeke", "sex": "m", "born": 1753, "died": 1798, "father": "Jan Francies Haverbeke", "mother": "Petronella de Decker"},-->
            <!--{"name": "Maria van Brussel", "sex": "f", "born": 1801, "died": 1834, "father": "Jan Frans van Brussel", "mother": "Joanna de Causmaecker"},-->
            <!--{"name": "Angela Haverbeke", "sex": "f", "born": 1728, "died": 1734, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Elisabeth Haverbeke", "sex": "f", "born": 1711, "died": 1754, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
            <!--{"name": "Lievijne Jans", "sex": "f", "born": 1542, "died": 1582, "father":null, "mother":null},-->
            <!--{"name": "Bernardus de Causmaecker", "sex": "m", "born": 1721, "died": 1789, "father": "Lieven de Causmaecker", "mother": "Livina Haverbeke"},-->
            <!--{"name": "Jacoba Lammens", "sex": "f", "born": 1699, "died": 1740, "father": "Lieven Lammens", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Pieter de Decker", "sex": "m", "born": 1705, "died": 1780, "father": "Joos de Decker", "mother": "Petronella van de Steene"},-->
            <!--{"name": "Joanna de Pape", "sex": "f", "born": 1654, "died": 1723, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
            <!--{"name": "Daniel Haverbeke", "sex": "m", "born": 1652, "died": 1723, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Lieven Haverbeke", "sex": "m", "born": 1631, "died": 1676, "father": "Pieter Haverbeke", "mother": "Anna van Hecke"},-->
            <!--{"name": "Martina de Pape", "sex": "f", "born": 1666, "died": 1727, "father": "Vincent de Pape", "mother": "Petronella Wauters"},-->
            <!--{"name": "Jan Francies Haverbeke", "sex": "m", "born": 1725, "died": 1779, "father": "Pieter Bernard Haverbeke", "mother": "Livina de Vrieze"},-->
            <!--{"name": "Maria Haverbeke", "sex": "m", "born": 1905, "died": 1997, "father": "Emile Haverbeke", "mother": "Emma de Milliano"},-->
            <!--{"name": "Petronella de Decker", "sex": "f", "born": 1731, "died": 1781, "father": "Pieter de Decker", "mother": "Livina Haverbeke"},-->
            <!--{"name": "Livina Sierens", "sex": "f", "born": 1761, "died": 1826, "father": "Jan Sierens", "mother": "Maria van Waes"},-->
            <!--{"name": "Laurentia Haverbeke", "sex": "f", "born": 1710, "died": 1786, "father": "Jan Haverbeke", "mother": "Maria de Rycke"},-->
            <!--{"name": "Carel Haverbeke", "sex": "m", "born": 1796, "died": 1837, "father": "Pieter Antone Haverbeke", "mother": "Livina Sierens"},-->
            <!--{"name": "Elisabeth Hercke", "sex": "f", "born": 1632, "died": 1674, "father": "Willem Hercke", "mother": "Margriet de Brabander"},-->
            <!--{"name": "Jan Haverbeke", "sex": "m", "born": 1671, "died": 1731, "father": "Lieven Haverbeke", "mother": "Elisabeth Hercke"},-->
            <!--{"name": "Anna van Hecke", "sex": "f", "born": 1607, "died": 1670, "father": "Paschasius van Hecke", "mother": "Martijntken Beelaert"},-->
            <!--{"name": "Maria Sturm", "sex": "f", "born": 1835, "died": 1917, "father": "Charles Sturm", "mother": "Seraphina Spelier"},-->
            <!--{"name": "Jacobus Bernardus van Brussel", "sex": "m", "born": 1736, "died": 1809, "father": "Jan van Brussel", "mother": "Elisabeth Haverbeke"}-->
        <!--]);-->

        <!--var ancestry = JSON.parse(ANCESTRY_FILE);-->

        <!--function reduceAncestors(person, f, defaultValue) {-->
            <!--//console.log('reduceAncestors called with', person.name,f,defaultValue);-->
            <!--function valueFor(person) {-->
                <!--//console.log('inner valueFor called with', person,f,defaultValue);-->
                <!--if (person == null){-->
                    <!--return defaultValue;}-->
                <!--else-->
                    <!--//console.log('valueFor returned ',byName[person.mother],byName[person.father]);-->
                    <!--return f(person, valueFor(byName[person.mother]),-->
                        <!--valueFor(byName[person.father]));-->
            <!--}-->
            <!--return valueFor(person);-->
        <!--}-->


        <!--function sharedDNA(person, fromMother, fromFather) {-->
            <!--//console.log('DNA called with ',person.name,fromMother, fromFather);-->
            <!--if (person.name == "Pauwels van Haverbeke")-->
                <!--return 1;-->
            <!--else-->
                <!--return (fromMother + fromFather) / 2;-->
        <!--}-->

        <!--var byName = {};-->
        <!--ancestry.forEach(function(person) {-->
            <!--byName[person.name] = person;-->
        <!--});-->

        <!--//console.log(byName);-->
        <!--var ph = byName["Philibert Haverbeke"];-->

        <!--console.log(reduceAncestors(ph,sharedDNA,0)/4);-->

        <!--//console.log(average(ancestry.filter(male)))-->

<!--var yu= [5,4,76,65,6];-->
<!--function  coco(arr) {-->
    <!--var why= 5-9 && arr[3];-->
    <!--console.log(why);-->
    <!--return why ? 4:'fff'-->
<!--}-->

<!--console.log(coco(yu));-->

        <!--function countAncestors(person, test) {-->
            <!--function combine(current, fromMother, fromFather) {-->
                <!--//if current != person then executing test-->
                <!--var thisOneCounts = current != person && test(current);-->
                <!--console.log(thisOneCounts);-->
                <!--return fromMother + fromFather + (thisOneCounts ? 1 : 0);-->
            <!--}-->
            <!--return reduceAncestors(person, combine, 0);-->
        <!--}-->

        <!--function longLivingPercentage(person) {-->
            <!--var all = countAncestors(person, function(person) {-->
                <!--return true;-->
            <!--});-->
            <!--var longLiving = countAncestors(person, function(person) {-->
                <!--return (person.died - person.born) >= 120;-->
            <!--});-->
            <!--console.log(longLiving,all);-->
            <!--return longLiving / all;-->
        <!--}-->
        <!--console.log(longLivingPercentage(byName["Emile Haverbeke"]));-->
        <!--// â†’ 0.129-->



    <!--<script>-->
        <!--// function unless(tst, then) {-->
        <!--//     if (!tst) then();-->
        <!--// }-->
        <!--// function repeat(times,body) {-->
        <!--//     for(var i=0; i<times; i++)-->
        <!--//         body(i);-->
        <!--// }-->
        <!--//-->
        <!--//-->
        <!--// repeat(9, function (n) { unless(n % 2, function () {console.log(n, 'is even'); }) })-->
        <!--//-->

        <!--// var jss= [{'rty':[-->
        <!--//         {-->
        <!--//             "title": "Sample Konfabulator Widget",-->
        <!--//             "name": "main_window",-->
        <!--//             "width": 500,-->
        <!--//             "height": 500-->
        <!--//         },-->
        <!--//         {-->
        <!--//             "src": "Images/Sun.png",-->
        <!--//             "name": "sun1",-->
        <!--//             "hOffset": 250,-->
        <!--//             "vOffset": 250,-->
        <!--//             "alignment": "center"-->
        <!--//         },-->
        <!--//         {-->
        <!--//             "data": "Click Here",-->
        <!--//             "size": 36,-->
        <!--//             "style": "bold",-->
        <!--//             "name": "text1",-->
        <!--//             "hOffset": 250,-->
        <!--//             "vOffset": 100,-->
        <!--//             "alignment": "center",-->
        <!--//             "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"}-->
        <!--//         ]}];-->
        <!--// //-->
        <!--// //console.log(jss[0].rty);-->
        <!--//-->
        <!--//-->
        <!--// console.log(jss[0].rty.filter(function (value) {-->
        <!--//     return value.name == "sun1" || value.name == "main_window" || value.name == "text1"  }));-->
        <!--//-->
        <!--// console.log(jss[0].rty.filter(function (value) {-->
        <!--//     return value["alignment"]=='center'}));-->
        <!--//-->
        <!--// console.log(jss.filter(function (value) {-->
        <!--//     return true}));-->

        <!--// for (var f in jss[0].rty) {-->
        <!--//     var obct = jss[0].rty[f];-->
        <!--//     for (var o in obct){-->
        <!--//         //console.log(o);-->
        <!--//         if (obct.width)-->
        <!--//             console.log('width found', obct.width);-->
        <!--//         else if (obct.hOffset)-->
        <!--//             console.log('offset found', obct.hOffset)-->
        <!--//     }-->
        <!--//     //console.log(obct);-->
        <!--// }-->

    <!--//===================hoisted vars=========================

      <!--var g = 8;-->
      <!--for (g; g<80; g++){-->
          <!--console.log(g)-->
      <!--};-->
    <!---->
      <!--console.log('g is', g)-->

    <!--//===============semicolons======================-->


        <!--//===============base datatypes======================-->

    <!--function double(f) {-->
    <!--return function (arg) {-->
    <!--for (var a=0 ; a<arg.length; a++ )-->
    <!--f(arg[a]);-->

    <!--}-->
    <!--}-->
    <!--double(console.log)(['doda', 'executed'])-->
    <!---->
    <!---->

        <!--// var arr1=[8,3,4,5,6,2,1,9];-->
        <!--//-->
        <!--// function pr (fff) {-->
        <!--//     console.log(fff.length);-->
        <!--//-->
        <!--//     for(var i =0; i<fff.length; i++) {-->
        <!--//         console.log(arr1[i])-->
        <!--//     }}-->
        <!--//pr(arr1);-->

        <!--//-->
        <!--// var ty= pr.apply(null,arr);-->
        <!--// console.log(ty);-->
        <!--// console.log(JSON.stringify('ghjghjg'));-->


        <!--// function map(arr,func) {-->
        <!--//     var ret=[];-->
        <!--//     for (var c=0; c< arr.length; c++)-->
        <!--//         ret.push(func(arr[c]));-->
        <!--//     return ret-->
        <!--// }-->
        <!--//-->
        <!--// console.log(map(arr1,function (val) {-->
        <!--//     return val+678678797898  ;   }-->
        <!--//       ))-->
        <!--//-->
        <!--//-->
        <!--// function forEach(array, action) {-->
        <!--//     for (var i =0; i<array.length; i++)-->
        <!--//         action(array[1])}-->
        <!--//-->
        <!--//        -->

        <!--//combine!-->

    <!--</script>-->
    <!--<script>-->

    <!--var journal =[{events:['work','sllep'],squirrel:true},{events:['work1','sllep1'],squirrel:false}];-->

    <!--function forEach(array,func){-->

        <!--for (var c =0; c < array.length; c++)-->
            <!--func(array[c]);-->
    <!--}-->
    <!--forEach(journal,console.log);-->

    <!--var sum =0;-->
    <!--var numbers = [1 , 2 , 3 , 4 , 50];-->
    <!--forEach ( numbers , function (number) {sum += number ;});-->
    <!--console.log ( sum ) ;-->

    <!--function  gt(journal) {-->

        <!--var phis={};-->
        <!--journal.forEach(function(entry)-->
        <!--{ console.log(entry); entry.events.forEach(function(event)-->
        <!--{console.log(event)}-->
        <!--)}-->
        <!--)}-->
    <!--gt(journal);-->

<!--function nui(numbs)-->

<!--{var sumo=0;-->
    <!--numbs.forEach(function (value) {sumo+=value});-->
<!--console.log(sumo)-->
<!--}-->
    <!--nui(numbers);-->

<!--function grt(n) {return function (m) {return m > n;} }-->

<!--var tu=grt(5);-->
<!--console.log(tu(2))-->

    <!--function  noi(f) {-->
    <!--return function (arg) {-->
        <!--console.log('call w', arg );-->
        <!--var val =f(arg);-->
        <!--console.log('called w', arg, 'val is', val);-->
        <!--return val;-->

    <!--};-->

        <!--}-->

       <!--console.log(noi(String)(1))-->

        <!---->

    <!--</script>-->



    <!--====================equal thing=========================-->
    <!--<script>-->
        <!--var arr = [56, 86, 45, 99, 90, 87, 89];-->
        <!--var arr2 = [56, 86, 45, 99, 90, 87, 809];-->

        <!--function bldlst(arr) {-->
            <!--var rem = {};-->
            <!--for (var a = 0; a < arr.length; a++) {-->
                <!--rem = {'value': arr[a], 'rest': rem};-->
            <!--}-->
            <!--return rem;-->
        <!--}-->

        <!--//onsole.log(bldlst(arr));-->
        <!--var li1 = bldlst(arr);-->
        <!--var li2 = bldlst(arr2);-->

        <!--function bldarr(lst) {-->
            <!--function itr(obj, ar) {-->
                <!--//console.log(obj['rest']);-->
                <!--if (obj['rest']) {-->
                    <!--ar.push(obj['value']);-->
                    <!--return itr(obj['rest'], ar);-->
                <!--}-->
                <!--else-->
                    <!--return ar-->
            <!--}-->

            <!--return itr(lst, []);-->
        <!--}-->

        <!--//console.log(bldarr(li), 'rebuilded');-->

        <!--//helpers-->
        <!--function prepend(lst, elem) {-->
            <!--var newlst = {};-->
            <!--newlst['value'] = elem;-->
            <!--newlst['rest'] = lst;-->
            <!--return (newlst);-->
        <!--}-->

        <!--//console.log(prepend(li,666));-->

        <!--function nth(lst, pos) {-->
            <!--var flattnd = bldarr(lst);-->
            <!--if (pos > flattnd.length)-->
                <!--return undefined;-->
            <!--else-->
                <!--return (flattnd[pos])-->
        <!--}-->
        <!--//console.log(nth(li,3));-->
        <!--//recursive-->
        <!--//console.log(li, 'li');-->

        <!--function nth2r(lst, fin) {-->
            <!--function recur(pos) {-->
                <!--//console.log(pos.value);-->
                <!--if (pos == undefined)-->
                    <!--return undefined;-->
                <!--if (pos.value == fin)-->
                    <!--return pos.rest;-->
                <!--else-->
                    <!--return recur(pos.rest)-->
            <!--}-->

            <!--return recur(lst);-->
        <!--}-->

        <!--//console.log(nth2r(li,89));-->
        <!--function deepEqual(obj1, obj2) {-->
            <!--var comflg = true;-->
            <!--function compareq(ob1, ob2) {-->
                <!--//retrieving properties for objects-->
                <!--var props1 = Object.getOwnPropertyNames(ob1);-->
                <!--var props2 = Object.getOwnPropertyNames(ob2);-->
                <!--//verifying length-->
                <!--if (props1.length != props2.length) {-->
                    <!--comflg = false;-->
                    <!--return comflg;-->
                <!--}-->
                <!--//verifying prop names and types-->
                <!--for (var pr in props1) {-->
                    <!--console.log(props1[pr], props2[pr], 'type?');-->
                    <!--//verifying prop names-->
                    <!--if (props1[pr] != props2[pr]) {-->
                        <!--comflg = false;-->
                        <!--return comflg;-->
                    <!--}-->
                    <!--//verifying prop values-->
                    <!--else if (props1[pr] == "value" && props2[pr] == "value"){-->
                        <!--console.log('checking values', ob1[props1[pr]], ob2[props2[pr]]);-->

                        <!--if (ob1[props1[pr]] != ob2[props2[pr]])-->
                        <!--{-->
                            <!--console.log('found invalid value', ob1[props1[pr]], ob2[props2[pr]]);-->
                            <!--comflg = false;-->
                            <!--return comflg;-->
                        <!--}-->
                    <!--}-->
                    <!--//verifying prop types in case of object verifying both objects -  recursing-->
                    <!--else if (typeof ob1[props1[pr]] == "object" && typeof ob2[props2[pr]] == "object") {-->
                        <!--console.log('recursing');-->
                        <!--return compareq(ob1[props1[pr]], ob2[props2[pr]]);-->
                    <!--}-->
                    <!--else if (typeof ob1[props1[pr]] != typeof ob2[props2[pr]]) {-->
                        <!--comflg = false;-->
                        <!--return comflg;-->
                    <!--}-->
                <!--}-->
                <!--return comflg;-->
            <!--}-->
            <!--//root checking-->
            <!--if (typeof obj1 == typeof obj1) {  //not equal by type-->

                <!--if (typeof obj1 == "object") //forwarding to recursive processing-->
                    <!--compareq(obj1, obj2); //waiting for result-->
                <!--else {                       //say we've got a simple type objects like strings or numbers-->
                    <!--if (obj1 === obj2)-->
                        <!--return comflg;-->
                    <!--else-->
                        <!--comflg = false;-->
                    <!--console.log('objects not fully equals')-->
                <!--}-->
            <!--}-->
            <!--return comflg-->
        <!--}-->
        <!--console.log(deepEqual(li1, li2))-->

    <!--</script>-->
    <!--=============================================-->

    <!--<script>-->

    <!--// function kaka(k0,ke) {-->
    <!--//     ar=[];-->
    <!--//     for (var rn = k0; rn<=ke; rn++)-->
    <!--//     ar.push(rn);-->
    <!--// return ar-->
    <!--// }-->

    <!--function summa(arr) {-->
    <!--sum=0;-->
    <!--console.log(arr.length);-->
    <!--for(var t=0; t<arr.length; t++)-->
    <!--sum+=arr[t];-->
    <!--return sum-->
    <!--}-->
    <!--//console.log(summa(kaka(23,89)))-->
    <!---->

    <!--</script>-->
    <!--<script>-->
    <!--var arr=[56,89,45,99];-->
    <!--function bldlst(arr) {-->

    <!--function intrnl(pos, rem, remp) {-->

    <!--if (pos < arr.length){-->
    <!--console.log(pos);-->
    <!--rem['rest']=rem;-->
    <!--rem['value']=arr[pos];-->
    <!--console.log(arr[pos]);-->
    <!--pos++;-->
    <!--return intrnl(pos, rem, remp)}-->
    <!--else-->
    <!--return rem-->
    <!--}-->

    <!--return intrnl(0, {})-->
    <!--}-->
    <!--console.log(bldlst(arr))-->
    <!--</script>-->
    <!--<script>-->
    <!--function arguga(lstarg) {-->
    <!--var arr=[];-->
    <!--arr.push({eve:lstarg});-->
    <!--arr.push({evening:[]});-->
    <!--for(var a=1; a<arguments.length; a++){-->
    <!--arr[1].evening.push(arguments[a])}-->
    <!--return arr-->
    <!--}-->
    <!--var arr=arguga('kaka',234234,2342034,24234,234234242342,234);-->
    <!--//reversing array-->
    <!--function reverseArray(arr) {-->
    <!--var reversedarr=[];-->
    <!--for (var a in arr)-->
    <!--reversedarr.push(arr[a]);-->
    <!--return reversedarr.reverse()-->
    <!--}-->
    <!--console.log(reverseArray(arr));-->
    <!--console.log(arr.reverse());-->
    <!--</script>-->
    <!--<script>-->
    <!--function kaka(k0,ke) {-->
    <!--ar=[];-->
    <!--for (var rn = k0; rn<=ke; rn++)-->
    <!--ar.push(rn);-->
    <!--return ar-->
    <!--}-->
    <!--var numbos = [4,7,2,45,334,1231,34534,6545654,45641231,123123,123123,3123213123,1231221222,2131212332,123123123234,23,2,3423432423423,234234234234234]-->
    <!--var tr= numbos.reduce(function (a,b) {-->
    <!--return Math.min(a,b)-->

    <!--});-->
    <!--console.log(tr)-->


    <!--function summa(arr) {-->
    <!--sum=0;-->
    <!--console.log(arr.length);-->
    <!--for(var t=0; t<arr.length; t++)-->
    <!--sum+=arr[t];-->
    <!--return sum-->
    <!--}-->
    <!--console.log(summa(kaka(23,89)))-->


    <!--function gravy(td) {-->
    <!--sum=0;-->
    <!--for(t in td)-->
    <!--sum+=td[t];-->
    <!--return sum-->
    <!--}-->
    <!--console.log(gravy(kaka(23,89)), 'gravy');-->


    <!--function excausted(arra) {-->
    <!--function innr(pos, sum) {-->
    <!--console.log(sum, 'star', pos, 'pos', arra.length);-->
    <!--if (pos < arra.length) {-->
    <!--sum += arra[pos];-->
    <!--pos++;-->
    <!--return innr(pos, sum);}-->
    <!--else-->
    <!--return 'end of summarising. result=' + sum;-->
    <!--}-->
    <!--return(innr(0, 0))-->

    <!--<script>-->
    <!--function excausted(arra) {-->
    <!--function innr(pos, sum) {-->
    <!--console.log(sum, 'star', pos, 'pos', arra.length);-->
    <!--if (pos < arra.length) {-->
    <!--sum += arra[pos];-->
    <!--pos++;-->
    <!--return innr(pos, sum);-->
    <!--}-->
    <!--else-->
    <!--return 'end of summarising. result=' + sum;-->
    <!--}-->
    <!--}-->
    <!--</script>&lt;!&ndash;return(innr(0, 0))&ndash;&gt;-->

    <!--}-->
    <!--console.log(excausted(kaka(23,89)));-->
    <!--</script>-->


    <!--<script>-->
    <!--var  ug={};-->
    <!--var er= '5654', rr= 100500;-->
    <!--console.log(rr);-->
    <!--console.log(er);-->
    <!--var edd = {-->
    <!--list1:[['rtr','dtr'], 'rtrt', 787],-->
    <!--dub:['uda','cuda']-->
    <!--};-->
    <!--for (var ff in  edd)-->
    <!--console.log(ff+'halabuda'+(String(Math.random()*10)).slice(0,3))-->

    <!--console.log(edd.list1[0][1]);-->
    <!--edd.list1[0][1]='luck';-->

    <!--function inof(event) {-->

    <!--}-->


    <!--</script>-->
    <!--<script>-->
    <!--function getCt(str, char) {-->
    <!--letterCount=0;-->
    <!--for(var cnt=0; cnt < str.length; cnt++) {-->
    <!--var lettr = str.charAt(cnt);-->
    <!--if (lettr ==char)-->
    <!--letterCount++;-->
    <!--}-->
    <!--return letterCount;-->
    <!--}-->
    <!--console.log(getCt('AQUAQIUM', 'A'));-->

    <!--</script>-->
    <!--<script>-->
    <!--var grog = 34;-->
    <!--var glog = -76;-->
    <!--function getmin(a,b) {-->

    <!--return Math.min(a,b);-->

    <!--}-->
    <!--console.log(getmin(grog,glog))-->
    <!--</script>-->
    <!--<script>-->
    <!--function isEven(nu) {-->

    <!--function intfind(num)-->
    <!--{  console.log('analysing'+ num);-->
    <!--if (num == 0)-->
    <!--return true;-->
    <!--else if (num == 1)-->
    <!--return false;-->
    <!--else-->
    <!--return intfind(num-2);-->
    <!--}-->
    <!--return(intfind(nu))-->
    <!--}-->
    <!--console.log(isEven(9))-->

    <!--</script>-->

    <!--<script>-->
    <!--function ext(stt){-->
    <!--var sttStr=String(stt);-->
    <!--while (sttStr.length<30){-->
    <!--console.log(sttStr)-->
    <!--sttStr='0'+sttStr;}-->
    <!--return sttStr-->
    <!--}-->
    <!--console.log(ext(56))-->
    <!--console.log(sttStr)-->
    <!--</script>-->

    <!--<script>-->
    <!--function findSol (targ){-->
    <!--function find(cur, hist){-->
    <!--if(cur == targ)-->
    <!--return hist;-->

    <!--else if (cur>targ)-->
    <!--return null;-->

    <!--else-->
    <!--return find(cur +5, '(' +hist+'+2)') || find(cur *40, '(' +hist+'*40)');-->

    <!--}-->
    <!--return find(1,'1');-->
    <!--}-->
    <!--console.log(findSol(9800))-->
    <!--</script>-->
    <!--<script>-->
    <!--function main(factr){-->
    <!--return function insde(multipl) {-->
    <!--return function moreinside(mmultipl){return factr*multipl*mmultipl};-->
    <!--};-->
    <!--}-->

    <!--var tt = main(6);-->
    <!--var ttt= tt(8);-->
    <!--console.log(ttt(4));-->

    <!--</script>-->
    <!--<script>-->
    <!--function wrapVal(n) {-->
    <!--var internVar = n;-->
    <!--return function () { return internVar;-->

    <!--};-->

    <!--}-->

    <!--var wr1= wrapVal(3);-->
    <!--var wr2=wrapVal(5);-->
    <!--console.log(wr1());-->
    <!--console.log(wr2());-->
    <!--console.log(wr1());-->
    <!--</script>-->

    <!--<script>-->
    <!--var vario = 'out';-->
    <!--var ddt= function () {-->

    <!--console.log(vario);-->
    <!--var varia = 'in';-->
    <!--console.log(varia);-->
    <!--return varia;-->
    <!--};-->

    <!--varia=ddt();-->
    <!--console.log(varia);-->
    <!--</script>-->


    <!--<script>-->
    <!--var landscape = function ()-->
    <!--{   var result ='';-->

    <!--var lblock = function(size)-->
    <!--{ for(var countr=0; countr<size; countr+=1)-->
    <!--result+='[[';-->

    <!--};-->
    <!--var cblock = function(size)-->
    <!--{ for(var countr=0; countr<size; countr+=1)-->
    <!--result+='~';-->

    <!--};-->
    <!--var rblock = function(size)-->
    <!--{ for(var countr=0; countr<size; countr+=1)-->
    <!--result+=']]';-->
    <!--result+='\\\\'-->

    <!--};-->
    <!--lblock(2);-->
    <!--cblock(60)-->
    <!--rblock(10);-->
    <!--return(result)-->

    <!--};-->

    <!--console.log(landscape())-->
    <!--</script>-->

    <!--<script> //triangle-->
    <!--zfsign='#';-->
    <!--zf='';-->
    <!--do-->
    <!--{zf+=zfsign;-->
    <!--console.log(zf);-->
    <!--}-->

    <!--while (zf.length<=7);-->

    <!--</script>-->
    <!--<script> //chess board-->
    <!--var rsize=9;-->
    <!--var csize=80;-->
    <!--var bl='#'; //black cell-->
    <!--var wt=' '; //white cell-->
    <!--var erow =''; //even row collector-->
    <!--var orow=''; //odd row collector-->

    <!--//generating patterns function-->

    <!--var gener= function (parit,size)-->
    <!--{ grww='';-->
    <!--for(var counter=0; counter<size; counter+=1)-->
    <!--{-->
    <!--var boolvar=!(counter %2);-->
    <!--{-->
    <!--if (parit)-->
    <!--grww += (boolvar ? bl:wt);-->
    <!--else grww += (boolvar ? wt:bl);-->
    <!--}-->
    <!--}-->
    <!--return grww;-->
    <!--};-->
    <!--//combining patterns with function call-->
    <!--for(var ccounter=0; ccounter<csize; ccounter+=1) //appending row-->
    <!--{-->
    <!--var cboolvar=!(ccounter %2);-->
    <!--console.log(cboolvar ? gener(true,rsize):gener(false,rsize));-->
    <!--}-->
    <!--</script>-->
    <!--<script> //fizzbizz-->
    <!--for (var fizcountr=0; fizcountr<100; fizcountr+=1)-->
    <!--{-->

    <!--if (fizcountr % 3 == 0) console.log('Fizz' + fizcountr);-->

    <!--else if (fizcountr % 5 == 0)-->
    <!--{-->
    <!--if (fizcountr % 3 != 0) console.log('Bizz' + fizcountr);-->

    <!--}-->
    <!--else (console.log(fizcountr));-->


    <!--}-->


    <!--</script>-->


    <title>Title</title>
</head>
<body>
<p style="font-size: 90px">JStest</p>
</body>
</html>